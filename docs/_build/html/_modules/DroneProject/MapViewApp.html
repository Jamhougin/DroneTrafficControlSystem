
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>DroneProject.MapViewApp &#8212; Automated Drone Traffic Control System 1 documentation</title>
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <h1>Source code for DroneProject.MapViewApp</h1><div class="highlight"><pre>
<span></span><span class="c1"># -*- coding: UTF-8 -*-</span>


<span class="c1">#Name:        James Hall</span>
<span class="c1">#Student No.: C00007006</span>
<span class="c1">#Institute:   Institute of Technology Carlow</span>
<span class="c1">#Project:     Drone Traffic Control System     </span>
<span class="c1">#Date:        April 2021 </span>
<span class="c1">#License:     GNU Affero General Public License v3.0</span>

<span class="c1">#Main App Screen and Layers</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">MapViewApp.py</span>
<span class="sd">=================================</span>

<span class="sd">This is the core module for the ADTCS project</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">random</span>
<span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">kivy.garden.mapview.mapview.utils</span> <span class="kn">import</span> <span class="n">clamp</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">pickle</span>
<span class="kn">import</span> <span class="nn">threading</span>
<span class="kn">from</span> <span class="nn">DroneController</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">AbstractDrone</span> <span class="kn">import</span> <span class="n">AbstractDrone</span>
<span class="kn">from</span> <span class="nn">VirtualDrone</span> <span class="kn">import</span> <span class="n">VirtualDrone</span>
<span class="kn">from</span> <span class="nn">Location</span> <span class="kn">import</span> <span class="n">Location</span>
<span class="kn">from</span> <span class="nn">Flight</span> <span class="kn">import</span> <span class="n">Flight</span>
<span class="kn">from</span> <span class="nn">save_load</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">PrintLists</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">FloatInput</span> <span class="kn">import</span> <span class="n">FloatInput</span>

<span class="kn">from</span> <span class="nn">kivy.config</span> <span class="kn">import</span> <span class="n">Config</span>
<span class="n">Config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;graphics&#39;</span><span class="p">,</span><span class="s1">&#39;maxfps&#39;</span><span class="p">,</span><span class="s1">&#39;60&#39;</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">kivy.lang</span> <span class="kn">import</span> <span class="n">Builder</span>

<span class="kn">from</span> <span class="nn">kivy.uix.behaviors.focus</span> <span class="kn">import</span> <span class="n">FocusBehavior</span>
<span class="kn">from</span> <span class="nn">kivy.uix.screenmanager</span> <span class="kn">import</span> <span class="n">ScreenManager</span><span class="p">,</span> <span class="n">Screen</span>

<span class="kn">from</span> <span class="nn">kivy.uix.widget</span> <span class="kn">import</span> <span class="n">Widget</span>
<span class="kn">from</span> <span class="nn">kivy.uix.button</span> <span class="kn">import</span> <span class="n">Button</span>
<span class="kn">from</span> <span class="nn">kivy.uix.label</span> <span class="kn">import</span> <span class="n">Label</span>
<span class="kn">from</span> <span class="nn">kivy.uix.boxlayout</span> <span class="kn">import</span> <span class="n">BoxLayout</span>
<span class="kn">from</span> <span class="nn">kivy.uix.floatlayout</span> <span class="kn">import</span> <span class="n">FloatLayout</span>
<span class="kn">from</span> <span class="nn">kivy.uix.textinput</span> <span class="kn">import</span> <span class="n">TextInput</span>
<span class="kn">from</span> <span class="nn">kivy.uix.popup</span> <span class="kn">import</span> <span class="n">Popup</span>
<span class="kn">from</span> <span class="nn">kivy.uix.image</span> <span class="kn">import</span> <span class="n">Image</span>
<span class="kn">from</span> <span class="nn">kivy.properties</span> <span class="kn">import</span> <span class="n">ObjectProperty</span><span class="p">,</span> <span class="n">NumericProperty</span><span class="p">,</span> <span class="n">StringProperty</span><span class="p">,</span> <span class="n">BooleanProperty</span>
<span class="kn">from</span> <span class="nn">kivy.uix.recycleview</span> <span class="kn">import</span> <span class="n">RecycleView</span>
<span class="kn">from</span> <span class="nn">kivy.uix.scrollview</span> <span class="kn">import</span> <span class="n">ScrollView</span>
<span class="kn">from</span> <span class="nn">kivy.core.window</span> <span class="kn">import</span> <span class="n">Window</span>

<span class="kn">from</span> <span class="nn">kivy.app</span> <span class="kn">import</span> <span class="n">App</span>
<span class="kn">from</span> <span class="nn">kivy.clock</span> <span class="kn">import</span> <span class="n">Clock</span>
<span class="kn">from</span> <span class="nn">kivy.graphics</span> <span class="kn">import</span> <span class="n">Color</span><span class="p">,</span> <span class="n">Line</span>
<span class="kn">from</span> <span class="nn">kivy.graphics.transformation</span> <span class="kn">import</span> <span class="n">Matrix</span>
<span class="kn">from</span> <span class="nn">kivy.graphics.context_instructions</span> <span class="kn">import</span> <span class="n">Translate</span><span class="p">,</span> <span class="n">Scale</span>
<span class="kn">from</span> <span class="nn">kivy.garden.mapview.mapview</span> <span class="kn">import</span> <span class="n">MapView</span><span class="p">,</span> <span class="n">MapLayer</span><span class="p">,</span> <span class="n">MapMarker</span><span class="p">,</span> <span class="n">MarkerMapLayer</span><span class="p">,</span> <span class="n">MIN_LONGITUDE</span><span class="p">,</span> <span class="n">MIN_LATITUDE</span><span class="p">,</span> <span class="n">MAX_LATITUDE</span><span class="p">,</span> <span class="n">MAX_LONGITUDE</span>

<span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">partial</span>

<span class="n">drones</span> <span class="o">=</span> <span class="n">LoadDroneList</span><span class="p">()</span>
<span class="n">locations</span> <span class="o">=</span> <span class="n">LoadLocationList</span><span class="p">()</span>
<span class="n">flights</span> <span class="o">=</span> <span class="n">LoadFlightList</span><span class="p">()</span>
<span class="n">threads</span> <span class="o">=</span> <span class="p">[]</span>      
<span class="n">coordinates</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">corridors</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">network</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">drone_hidden</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">location_hidden</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">new_location_add</span> <span class="o">=</span> <span class="kc">False</span>
<span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
<span class="n">location_layer</span> <span class="o">=</span> <span class="kc">None</span>
 
<div class="viewcode-block" id="MapViewApp"><a class="viewcode-back" href="../../source/DroneProject.html#DroneProject.MapViewApp.MapViewApp">[docs]</a><span class="k">class</span> <span class="nc">MapViewApp</span><span class="p">(</span><span class="n">App</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Main App Class</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">mapview</span> <span class="o">=</span> <span class="kc">None</span>
 
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">MapViewApp</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">Clock</span><span class="o">.</span><span class="n">schedule_once</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">post</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
 
<div class="viewcode-block" id="MapViewApp.build"><a class="viewcode-back" href="../../source/DroneProject.html#DroneProject.MapViewApp.MapViewApp.build">[docs]</a>    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="s2">&quot;Drone Air Traffic Control&quot;</span>
        <span class="n">layout</span> <span class="o">=</span> <span class="n">BoxLayout</span><span class="p">(</span><span class="n">orientation</span><span class="o">=</span><span class="s1">&#39;vertical&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">layout</span></div>
 
<div class="viewcode-block" id="MapViewApp.post"><a class="viewcode-back" href="../../source/DroneProject.html#DroneProject.MapViewApp.MapViewApp.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        
        <span class="k">global</span> <span class="n">location_layer</span>
        <span class="n">layout</span> <span class="o">=</span> <span class="n">FloatLayout</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mapview</span> <span class="o">=</span> <span class="n">MapView</span><span class="p">(</span><span class="n">zoom</span><span class="o">=</span><span class="mi">18</span><span class="p">,</span> <span class="n">lat</span><span class="o">=</span><span class="mf">52.824725</span><span class="p">,</span> <span class="n">lon</span><span class="o">=-</span><span class="mf">6.935661</span><span class="p">)</span>
        <span class="n">line</span> <span class="o">=</span> <span class="n">LineMapLayer</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mapview</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">line</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;scatter&quot;</span><span class="p">)</span>  <span class="c1"># window scatter</span>
        <span class="n">drone_layer</span> <span class="o">=</span> <span class="n">DroneMarkerLayer</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mapview</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">drone_layer</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;scatter&quot;</span><span class="p">)</span>
        <span class="n">location_layer</span> <span class="o">=</span> <span class="n">LocationMarkerLayer</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mapview</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">location_layer</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;scatter&quot;</span><span class="p">)</span>
        <span class="n">flights_layer</span> <span class="o">=</span> <span class="n">FlightLayer</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mapview</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">flights_layer</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;scatter&quot;</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mapview</span><span class="p">)</span>
        
        <span class="n">dronebuttoncolor</span> <span class="o">=</span> <span class="p">[</span><span class="o">.</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span> <span class="c1">#Green</span>
        <span class="n">locationbuttoncolor</span> <span class="o">=</span> <span class="p">[</span><span class="o">.</span><span class="mi">5</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span> <span class="c1">#Blue</span>
        <span class="n">flightbuttoncolor</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="o">.</span><span class="mi">5</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span> <span class="c1">#Yellow</span>
        
        <span class="c1">#Button containers</span>
        <span class="n">buttonrow1</span> <span class="o">=</span> <span class="n">BoxLayout</span><span class="p">(</span><span class="n">orientation</span><span class="o">=</span><span class="s1">&#39;horizontal&#39;</span><span class="p">,</span><span class="n">height</span><span class="o">=</span><span class="s1">&#39;30dp&#39;</span><span class="p">,</span><span class="n">size_hint_y</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
        <span class="n">buttonrow2</span> <span class="o">=</span> <span class="n">BoxLayout</span><span class="p">(</span><span class="n">orientation</span><span class="o">=</span><span class="s1">&#39;horizontal&#39;</span><span class="p">,</span><span class="n">height</span><span class="o">=</span><span class="s1">&#39;30dp&#39;</span><span class="p">,</span><span class="n">size_hint_y</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
        <span class="n">buttonrow3</span> <span class="o">=</span> <span class="n">BoxLayout</span><span class="p">(</span><span class="n">orientation</span><span class="o">=</span><span class="s1">&#39;horizontal&#39;</span><span class="p">,</span><span class="n">height</span><span class="o">=</span><span class="s1">&#39;30dp&#39;</span><span class="p">,</span><span class="n">size_hint_y</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
        
        <span class="n">buttonrow1</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="n">Button</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;RemoveDrone&quot;</span><span class="p">,</span><span class="n">on_press</span><span class="o">=</span><span class="k">lambda</span> <span class="n">a</span><span class="p">:</span> <span class="n">drone_layer</span><span class="o">.</span><span class="n">remove_drone_popup</span><span class="p">(),</span> <span class="n">background_color</span> <span class="o">=</span> <span class="n">dronebuttoncolor</span><span class="p">))</span>
        <span class="n">buttonrow1</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="n">Button</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;AddDrone&quot;</span><span class="p">,</span><span class="n">on_press</span><span class="o">=</span><span class="k">lambda</span> <span class="n">a</span><span class="p">:</span> <span class="n">drone_layer</span><span class="o">.</span><span class="n">add_virtual_drone_popup</span><span class="p">(),</span> <span class="n">background_color</span> <span class="o">=</span> <span class="n">dronebuttoncolor</span><span class="p">))</span>
        <span class="n">buttonrow1</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="n">Button</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;ViewLocationsList&quot;</span><span class="p">,</span><span class="n">on_press</span><span class="o">=</span><span class="k">lambda</span> <span class="n">a</span><span class="p">:</span> <span class="n">location_layer</span><span class="o">.</span><span class="n">view_locations_popup</span><span class="p">(),</span> <span class="n">background_color</span> <span class="o">=</span> <span class="n">locationbuttoncolor</span><span class="p">))</span>
        <span class="n">buttonrow1</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="n">Button</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;ViewLocationMarkers&quot;</span><span class="p">,</span> <span class="n">background_color</span> <span class="o">=</span> <span class="n">locationbuttoncolor</span><span class="p">,</span> <span class="n">on_press</span><span class="o">=</span><span class="k">lambda</span> <span class="n">a</span><span class="p">:</span> <span class="n">show_locations_button</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mapview</span><span class="p">,</span> <span class="n">location_layer</span><span class="p">,</span> <span class="n">drone_layer</span><span class="p">)))</span>
        
        <span class="n">buttonrow2</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="n">Button</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;ViewDrones&quot;</span><span class="p">,</span> <span class="n">background_color</span> <span class="o">=</span> <span class="n">dronebuttoncolor</span><span class="p">,</span><span class="n">on_press</span><span class="o">=</span><span class="k">lambda</span> <span class="n">a</span><span class="p">:</span> <span class="n">show_drones_button</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mapview</span><span class="p">,</span> <span class="n">drone_layer</span><span class="p">,</span> <span class="n">location_layer</span><span class="p">)))</span>
        <span class="n">buttonrow2</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="n">Button</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;AddVirtualDrone&quot;</span><span class="p">,</span><span class="n">on_press</span><span class="o">=</span><span class="k">lambda</span> <span class="n">a</span><span class="p">:</span> <span class="n">drone_layer</span><span class="o">.</span><span class="n">add_virtual_drone_popup</span><span class="p">(),</span> <span class="n">background_color</span> <span class="o">=</span> <span class="n">dronebuttoncolor</span><span class="p">))</span>
        <span class="n">buttonrow2</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="n">Button</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;AddLocation&quot;</span><span class="p">,</span><span class="n">on_press</span><span class="o">=</span><span class="k">lambda</span> <span class="n">a</span><span class="p">:</span> <span class="n">location_layer</span><span class="o">.</span><span class="n">add_point_popup</span><span class="p">(),</span> <span class="n">background_color</span> <span class="o">=</span> <span class="n">locationbuttoncolor</span><span class="p">))</span>
        <span class="n">buttonrow2</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="n">Button</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;RemoveLocation&quot;</span><span class="p">,</span><span class="n">on_press</span><span class="o">=</span><span class="k">lambda</span> <span class="n">a</span><span class="p">:</span> <span class="n">location_layer</span><span class="o">.</span><span class="n">remove_location_popup</span><span class="p">(),</span> <span class="n">background_color</span> <span class="o">=</span> <span class="n">locationbuttoncolor</span><span class="p">))</span>
        <span class="n">buttonrow3</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="n">Button</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;ViewFlightsList&quot;</span><span class="p">,</span><span class="n">on_press</span><span class="o">=</span><span class="k">lambda</span> <span class="n">a</span><span class="p">:</span> <span class="n">flights_layer</span><span class="o">.</span><span class="n">view_flights_popup</span><span class="p">(),</span> <span class="n">background_color</span> <span class="o">=</span> <span class="n">flightbuttoncolor</span><span class="p">))</span>
        <span class="n">buttonrow3</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="n">Button</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;CreateFlight&quot;</span><span class="p">,</span><span class="n">on_press</span><span class="o">=</span><span class="k">lambda</span> <span class="n">a</span><span class="p">:</span> <span class="n">flights_layer</span><span class="o">.</span><span class="n">create_flight_popup</span><span class="p">(),</span> <span class="n">background_color</span> <span class="o">=</span> <span class="n">flightbuttoncolor</span><span class="p">))</span>
        <span class="n">buttonrow3</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="n">Button</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;RemoveFlight&quot;</span><span class="p">,</span><span class="n">on_press</span><span class="o">=</span><span class="k">lambda</span> <span class="n">a</span><span class="p">:</span> <span class="n">flights_layer</span><span class="o">.</span><span class="n">remove_flight_popup</span><span class="p">(),</span> <span class="n">background_color</span> <span class="o">=</span> <span class="n">flightbuttoncolor</span><span class="p">))</span>
        <span class="n">buttonrow3</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="n">Button</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;StartFlight&quot;</span><span class="p">,</span><span class="n">on_press</span><span class="o">=</span><span class="k">lambda</span> <span class="n">a</span><span class="p">:</span> <span class="n">flights_layer</span><span class="o">.</span><span class="n">start_flight_popup</span><span class="p">(),</span> <span class="n">background_color</span> <span class="o">=</span> <span class="n">flightbuttoncolor</span><span class="p">))</span>
        <span class="n">buttonrow3</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="n">Button</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;AbortFlight&quot;</span><span class="p">,</span><span class="n">on_press</span><span class="o">=</span><span class="k">lambda</span> <span class="n">a</span><span class="p">:</span> <span class="n">flights_layer</span><span class="o">.</span><span class="n">abort_flight_popup</span><span class="p">(),</span> <span class="n">background_color</span> <span class="o">=</span> <span class="n">flightbuttoncolor</span><span class="p">))</span>
        <span class="c1">#First button row</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="n">buttonrow1</span><span class="p">)</span>
        <span class="c1">#Second button row</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="n">buttonrow2</span><span class="p">)</span>
        <span class="c1">#Third button row</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="n">buttonrow3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>
        
        <span class="c1">#Used to draw locationmarkers on screen</span>
        <span class="k">def</span> <span class="nf">show_locations_button</span><span class="p">(</span><span class="n">mapview</span><span class="p">,</span> <span class="n">locationslayer</span><span class="p">,</span> <span class="n">droneslayer</span><span class="p">):</span>
            <span class="k">global</span> <span class="n">location_hidden</span>
            <span class="k">global</span> <span class="n">drone_hidden</span>
            <span class="k">global</span> <span class="n">threads</span>
            <span class="n">mapv</span> <span class="o">=</span> <span class="n">mapview</span> 
            <span class="n">locationsl</span> <span class="o">=</span> <span class="n">locationslayer</span> 
            <span class="n">dronesl</span> <span class="o">=</span> <span class="n">droneslayer</span> 

            <span class="k">if</span> <span class="n">location_hidden</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
                <span class="n">location_hidden</span> <span class="o">=</span> <span class="kc">False</span>                
                <span class="n">locationsl</span><span class="o">.</span><span class="n">draw_locations</span><span class="p">()</span>
            <span class="k">elif</span> <span class="n">location_hidden</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
                <span class="n">location_hidden</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">mapv</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
                    <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">child</span><span class="p">)</span> <span class="ow">is</span> <span class="n">MarkerMapLayer</span><span class="p">:</span>
                        <span class="c1">#Remove all marker widgets and add back in Drone markers if not hidden</span>
                        <span class="n">child</span><span class="o">.</span><span class="n">clear_widgets</span><span class="p">()</span>
                        <span class="k">if</span> <span class="n">drone_hidden</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
                            <span class="n">threads</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span> <span class="o">=</span> <span class="n">dronesl</span><span class="o">.</span><span class="n">draw_drones</span><span class="p">,</span> <span class="n">args</span> <span class="o">=</span> <span class="p">(</span><span class="n">dronesl</span><span class="p">,</span> <span class="n">locationsl</span><span class="p">),</span> <span class="n">daemon</span> <span class="o">=</span> <span class="kc">True</span><span class="p">))</span>
                            <span class="n">threads</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">threads</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
                        <span class="k">break</span>
        
        <span class="c1">#Used to draw drone markers on screen</span>
        <span class="k">def</span> <span class="nf">show_drones_button</span><span class="p">(</span><span class="n">mapview</span><span class="p">,</span> <span class="n">droneslayer</span><span class="p">,</span> <span class="n">locationslayer</span><span class="p">):</span>
            <span class="k">global</span> <span class="n">drone_hidden</span>
            <span class="k">global</span> <span class="n">location_hidden</span>
            <span class="k">global</span> <span class="n">threads</span>
            <span class="n">mapv</span> <span class="o">=</span> <span class="n">mapview</span>
            <span class="n">dronesl</span> <span class="o">=</span> <span class="n">droneslayer</span>
            <span class="n">locationsl</span> <span class="o">=</span> <span class="n">locationslayer</span>
            
            <span class="k">if</span> <span class="n">drone_hidden</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
                <span class="n">drone_hidden</span> <span class="o">=</span> <span class="kc">False</span>                
                <span class="n">threads</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span> <span class="o">=</span> <span class="n">dronesl</span><span class="o">.</span><span class="n">draw_drones</span><span class="p">,</span> <span class="n">args</span> <span class="o">=</span> <span class="p">(</span><span class="n">dronesl</span><span class="p">,</span> <span class="n">locationsl</span><span class="p">),</span> <span class="n">daemon</span> <span class="o">=</span> <span class="kc">True</span><span class="p">))</span>
                <span class="n">threads</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">threads</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>                    
            <span class="k">elif</span> <span class="n">drone_hidden</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
                <span class="n">drone_hidden</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">mapv</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
                    <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">child</span><span class="p">)</span> <span class="ow">is</span> <span class="n">MarkerMapLayer</span><span class="p">:</span>
                        <span class="c1">#Remove all marker widgets and add back in Location markers if not hidden</span>
                        <span class="n">child</span><span class="o">.</span><span class="n">clear_widgets</span><span class="p">()</span>
                        <span class="k">if</span> <span class="n">location_hidden</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
                            <span class="n">locationsl</span><span class="o">.</span><span class="n">draw_locations</span><span class="p">()</span>
                        <span class="k">break</span></div></div>

<span class="c1">###Class related to CRUD location operations</span>
<div class="viewcode-block" id="LocationMarkerLayer"><a class="viewcode-back" href="../../source/DroneProject.html#DroneProject.MapViewApp.LocationMarkerLayer">[docs]</a><span class="k">class</span> <span class="nc">LocationMarkerLayer</span><span class="p">(</span><span class="n">MapLayer</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Class for adding Location and Location Markers</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">locationview</span> <span class="o">=</span> <span class="kc">None</span>
    
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">LocationMarkerLayer</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">zoom</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">locationview</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span>
        
<div class="viewcode-block" id="LocationMarkerLayer.on_touch_down"><a class="viewcode-back" href="../../source/DroneProject.html#DroneProject.MapViewApp.LocationMarkerLayer.on_touch_down">[docs]</a>    <span class="k">def</span> <span class="nf">on_touch_down</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">touch</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds functionality to kivy&#39;s on_touch_down() event, specificly for adding new Locations </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">global</span> <span class="n">new_location_add</span>
        <span class="k">global</span> <span class="n">location_layer</span>
        
        <span class="k">if</span> <span class="n">new_location_add</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">touch</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">touch</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
            <span class="n">location_layer</span><span class="o">.</span><span class="n">add_point</span><span class="p">(</span><span class="n">touch</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">touch</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="mi">0</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">LocationMarkerLayer</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">on_touch_down</span><span class="p">(</span><span class="n">touch</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="LocationMarkerLayer.draw_locations"><a class="viewcode-back" href="../../source/DroneProject.html#DroneProject.MapViewApp.LocationMarkerLayer.draw_locations">[docs]</a>    <span class="k">def</span> <span class="nf">draw_locations</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds location markers to MapLayer</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">locationview</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">zoom</span> <span class="o">=</span> <span class="n">locationview</span><span class="o">.</span><span class="n">zoom</span>
        <span class="k">global</span> <span class="n">locations</span>

        <span class="k">for</span> <span class="n">location</span> <span class="ow">in</span> <span class="n">locations</span><span class="p">:</span>  
            <span class="c1"># Draw new Location markers</span>
            <span class="n">locationview</span><span class="o">.</span><span class="n">add_marker</span><span class="p">(</span><span class="n">MapMarker</span><span class="p">(</span><span class="n">lat</span><span class="o">=</span><span class="n">location</span><span class="o">.</span><span class="n">getlocationlatitude</span><span class="p">(),</span> <span class="n">lon</span><span class="o">=</span><span class="n">location</span><span class="o">.</span><span class="n">getlocationlongitude</span><span class="p">(),</span> <span class="n">source</span><span class="o">=</span><span class="s1">&#39;images/MapMarker.png&#39;</span><span class="p">))</span></div>
          
<div class="viewcode-block" id="LocationMarkerLayer.add_point"><a class="viewcode-back" href="../../source/DroneProject.html#DroneProject.MapViewApp.LocationMarkerLayer.add_point">[docs]</a>    <span class="k">def</span> <span class="nf">add_point</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lat</span><span class="p">,</span> <span class="n">lon</span><span class="p">,</span> <span class="n">alt</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a location to system</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">global</span> <span class="n">locations</span>
        <span class="k">global</span> <span class="n">new_location_add</span>
        <span class="k">global</span> <span class="n">name</span>
        <span class="k">if</span> <span class="n">new_location_add</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">newlocation</span> <span class="o">=</span> <span class="n">Location</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">get_latlon_at</span><span class="p">(</span><span class="n">lat</span><span class="p">,</span><span class="n">lon</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">get_latlon_at</span><span class="p">(</span><span class="n">lat</span><span class="p">,</span><span class="n">lon</span><span class="p">)[</span><span class="mi">1</span><span class="p">],</span> <span class="n">alt</span><span class="p">)</span>
            <span class="n">new_location_add</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="c1">#: Add a point a chosen coordinates</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;location to add:&quot;</span><span class="p">)</span>
            <span class="nb">print</span> <span class="p">(</span><span class="n">newlocation</span><span class="o">.</span><span class="n">getlocationname</span><span class="p">())</span>
            <span class="n">locations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">newlocation</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">draw_locations</span><span class="p">()</span>
            <span class="n">SaveLocationList</span><span class="p">(</span><span class="n">locations</span><span class="p">)</span></div>
    

<div class="viewcode-block" id="LocationMarkerLayer.set_loc_name"><a class="viewcode-back" href="../../source/DroneProject.html#DroneProject.MapViewApp.LocationMarkerLayer.set_loc_name">[docs]</a>    <span class="k">def</span> <span class="nf">set_loc_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nname</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set name for new location to be added to system</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">global</span> <span class="n">name</span>
        <span class="k">global</span> <span class="n">new_location_add</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">nname</span>
        <span class="n">new_location_add</span> <span class="o">=</span> <span class="kc">True</span></div>
       
<div class="viewcode-block" id="LocationMarkerLayer.add_point_popup"><a class="viewcode-back" href="../../source/DroneProject.html#DroneProject.MapViewApp.LocationMarkerLayer.add_point_popup">[docs]</a>    <span class="k">def</span> <span class="nf">add_point_popup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Popup used to set name for new location </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">mapview</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span>
        <span class="k">global</span> <span class="n">locations</span>
        <span class="k">global</span> <span class="n">name</span>
        <span class="k">global</span> <span class="n">new_location_add</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span> <span class="o">=</span> <span class="n">BoxLayout</span><span class="p">(</span><span class="n">orientation</span><span class="o">=</span><span class="s1">&#39;vertical&#39;</span><span class="p">,</span><span class="n">spacing</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
        
        <span class="n">nameinput</span> <span class="o">=</span> <span class="n">TextInput</span><span class="p">(</span><span class="n">hint_text</span><span class="o">=</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="n">multiline</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">size_hint</span><span class="o">=</span><span class="p">(</span><span class="o">.</span><span class="mi">9</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">pos_hint</span> <span class="o">=</span><span class="p">{</span><span class="s1">&#39;center_x&#39;</span><span class="p">:</span> <span class="o">.</span><span class="mi">5</span><span class="p">,</span><span class="s1">&#39;center_y&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span> <span class="n">height</span><span class="o">=</span><span class="mi">40</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="n">nameinput</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">popup</span> <span class="o">=</span> <span class="n">Popup</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Add Location&quot;</span><span class="p">,</span> <span class="n">auto_dismiss</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">size_hint</span><span class="o">=</span><span class="p">(</span><span class="o">.</span><span class="mi">5</span><span class="p">,</span><span class="o">.</span><span class="mi">5</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="n">Button</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;Add Location Name&quot;</span><span class="p">,</span> <span class="n">size_hint</span><span class="o">=</span><span class="p">(</span><span class="o">.</span><span class="mi">9</span><span class="p">,</span><span class="o">.</span><span class="mi">7</span><span class="p">),</span> <span class="n">pos_hint</span> <span class="o">=</span><span class="p">{</span><span class="s1">&#39;center_x&#39;</span><span class="p">:</span> <span class="o">.</span><span class="mi">5</span><span class="p">,</span><span class="s1">&#39;center_y&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span><span class="n">on_press</span><span class="o">=</span><span class="k">lambda</span> <span class="n">a</span><span class="p">:</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">popup</span><span class="o">.</span><span class="n">dismiss</span><span class="p">(),</span><span class="bp">self</span><span class="o">.</span><span class="n">set_loc_name</span><span class="p">(</span><span class="n">nameinput</span><span class="o">.</span><span class="n">text</span><span class="p">))))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="n">Button</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;Close window&quot;</span><span class="p">,</span> <span class="n">background_color</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span> <span class="n">size_hint</span><span class="o">=</span><span class="p">(</span><span class="o">.</span><span class="mi">9</span><span class="p">,</span><span class="o">.</span><span class="mi">7</span><span class="p">),</span> <span class="n">pos_hint</span> <span class="o">=</span><span class="p">{</span><span class="s1">&#39;center_x&#39;</span><span class="p">:</span> <span class="o">.</span><span class="mi">5</span><span class="p">,</span><span class="s1">&#39;center_y&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span><span class="n">on_press</span><span class="o">=</span><span class="k">lambda</span> <span class="n">a</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">popup</span><span class="o">.</span><span class="n">dismiss</span><span class="p">()))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">popup</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">)</span>    
        <span class="bp">self</span><span class="o">.</span><span class="n">popup</span><span class="o">.</span><span class="n">open</span><span class="p">()</span></div>
    
    
<div class="viewcode-block" id="LocationMarkerLayer.view_locations_popup"><a class="viewcode-back" href="../../source/DroneProject.html#DroneProject.MapViewApp.LocationMarkerLayer.view_locations_popup">[docs]</a>    <span class="k">def</span> <span class="nf">view_locations_popup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Popup to display a list of locations on system</span>
<span class="sd">        &quot;&quot;&quot;</span>
           
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span> <span class="o">=</span> <span class="n">BoxLayout</span><span class="p">(</span><span class="n">orientation</span><span class="o">=</span><span class="s1">&#39;vertical&#39;</span><span class="p">,</span><span class="n">spacing</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
        
        <span class="c1">#Scrollable location list</span>
        <span class="n">locationlistview</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">text</span><span class="o">=</span> <span class="n">location_list</span><span class="p">(),</span><span class="n">size_hint</span><span class="o">=</span><span class="p">(</span><span class="mf">1.01</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>
        <span class="n">locationlistviewscroll</span> <span class="o">=</span> <span class="n">ScrollView</span><span class="p">(</span><span class="n">size_hint</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="n">Window</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="n">Window</span><span class="o">.</span><span class="n">height</span><span class="o">/</span><span class="mi">2</span><span class="p">),</span><span class="n">scroll_y</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">do_scroll_x</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">scroll_type</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;bars&#39;</span><span class="p">,</span><span class="s1">&#39;content&#39;</span><span class="p">],</span> <span class="n">bar_width</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="n">pos_hint</span> <span class="o">=</span><span class="p">{</span><span class="s1">&#39;center_x&#39;</span><span class="p">:</span> <span class="o">.</span><span class="mi">5</span><span class="p">,</span><span class="s1">&#39;center_y&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>
        <span class="n">locationlistviewscroll</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="n">locationlistview</span><span class="p">)</span>
        <span class="n">locationlistviewscroll</span><span class="o">.</span><span class="n">effect_cls</span><span class="o">.</span><span class="n">spring_constant</span><span class="o">=</span><span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="n">locationlistviewscroll</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="n">Button</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;Close window&quot;</span><span class="p">,</span> <span class="n">background_color</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span> <span class="n">size_hint</span><span class="o">=</span><span class="p">(</span><span class="o">.</span><span class="mi">9</span><span class="p">,</span><span class="o">.</span><span class="mi">7</span><span class="p">),</span> <span class="n">pos_hint</span> <span class="o">=</span><span class="p">{</span><span class="s1">&#39;center_x&#39;</span><span class="p">:</span> <span class="o">.</span><span class="mi">5</span><span class="p">,</span><span class="s1">&#39;center_y&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span> <span class="n">on_press</span><span class="o">=</span><span class="k">lambda</span> <span class="n">a</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">popup</span><span class="o">.</span><span class="n">dismiss</span><span class="p">()))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">popup</span> <span class="o">=</span> <span class="n">Popup</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;View Location List&quot;</span><span class="p">,</span> <span class="n">auto_dismiss</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">size_hint</span><span class="o">=</span><span class="p">(</span><span class="o">.</span><span class="mi">9</span><span class="p">,</span><span class="o">.</span><span class="mi">8</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">popup</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">popup</span><span class="o">.</span><span class="n">open</span><span class="p">()</span></div>
     
<div class="viewcode-block" id="LocationMarkerLayer.remove_location_popup"><a class="viewcode-back" href="../../source/DroneProject.html#DroneProject.MapViewApp.LocationMarkerLayer.remove_location_popup">[docs]</a>    <span class="k">def</span> <span class="nf">remove_location_popup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Popup used to remove location from system</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">def</span> <span class="nf">buttonPressRemoveLocation</span><span class="p">(</span><span class="n">selection</span><span class="p">):</span>
            <span class="k">global</span> <span class="n">locations</span>
            <span class="k">global</span> <span class="n">drone_hidden</span>
            <span class="k">global</span> <span class="n">location_hidden</span>
            <span class="k">global</span> <span class="n">threads</span>
            <span class="k">if</span> <span class="nb">int</span><span class="p">(</span><span class="n">selection</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">1</span> <span class="ow">or</span> <span class="nb">int</span><span class="p">(</span><span class="n">selection</span><span class="p">)</span> <span class="o">&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">locations</span><span class="p">):</span>
                <span class="k">return</span>
            
            <span class="k">del</span> <span class="n">locations</span><span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">selection</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">SaveLocationList</span><span class="p">(</span><span class="n">locations</span><span class="p">)</span>

        
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span> <span class="o">=</span> <span class="n">BoxLayout</span><span class="p">(</span><span class="n">orientation</span><span class="o">=</span><span class="s1">&#39;vertical&#39;</span><span class="p">,</span><span class="n">spacing</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
        
        <span class="n">locationlistview</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">text</span><span class="o">=</span> <span class="n">location_list</span><span class="p">(),</span><span class="n">size_hint</span><span class="o">=</span><span class="p">(</span><span class="mf">1.01</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>
        <span class="n">locationlistviewscroll</span> <span class="o">=</span> <span class="n">ScrollView</span><span class="p">(</span><span class="n">size_hint</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="n">Window</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="n">Window</span><span class="o">.</span><span class="n">height</span><span class="o">/</span><span class="mi">4</span><span class="p">),</span><span class="n">scroll_y</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">do_scroll_x</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">scroll_type</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;bars&#39;</span><span class="p">,</span><span class="s1">&#39;content&#39;</span><span class="p">],</span> <span class="n">bar_width</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="n">pos_hint</span> <span class="o">=</span><span class="p">{</span><span class="s1">&#39;center_x&#39;</span><span class="p">:</span> <span class="o">.</span><span class="mi">5</span><span class="p">,</span><span class="s1">&#39;center_y&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>
        <span class="n">locationlistviewscroll</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="n">locationlistview</span><span class="p">)</span>
        <span class="n">locationlistviewscroll</span><span class="o">.</span><span class="n">effect_cls</span><span class="o">.</span><span class="n">spring_constant</span><span class="o">=</span><span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="n">locationlistviewscroll</span><span class="p">)</span>
        
        <span class="n">location</span> <span class="o">=</span> <span class="n">FloatInput</span><span class="p">(</span><span class="n">hint_text</span><span class="o">=</span><span class="s2">&quot;Enter Number corresponding to location&quot;</span><span class="p">,</span> <span class="n">multiline</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">size_hint</span><span class="o">=</span><span class="p">(</span><span class="o">.</span><span class="mi">9</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">pos_hint</span> <span class="o">=</span><span class="p">{</span><span class="s1">&#39;center_x&#39;</span><span class="p">:</span> <span class="o">.</span><span class="mi">5</span><span class="p">,</span><span class="s1">&#39;center_y&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span><span class="n">height</span><span class="o">=</span><span class="mi">40</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="n">location</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="n">Button</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;RemoveLocation&quot;</span><span class="p">,</span> <span class="n">size_hint</span><span class="o">=</span><span class="p">(</span><span class="o">.</span><span class="mi">9</span><span class="p">,</span><span class="o">.</span><span class="mi">8</span><span class="p">),</span> <span class="n">pos_hint</span> <span class="o">=</span><span class="p">{</span><span class="s1">&#39;center_x&#39;</span><span class="p">:</span> <span class="o">.</span><span class="mi">5</span><span class="p">,</span><span class="s1">&#39;center_y&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span><span class="n">on_press</span><span class="o">=</span><span class="k">lambda</span> <span class="n">a</span><span class="p">:</span> <span class="n">buttonPressRemoveLocation</span><span class="p">(</span><span class="n">location</span><span class="o">.</span><span class="n">text</span><span class="p">)))</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="n">Button</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;Close window&quot;</span><span class="p">,</span> <span class="n">background_color</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span> <span class="n">size_hint</span><span class="o">=</span><span class="p">(</span><span class="o">.</span><span class="mi">9</span><span class="p">,</span><span class="o">.</span><span class="mi">8</span><span class="p">),</span> <span class="n">pos_hint</span> <span class="o">=</span><span class="p">{</span><span class="s1">&#39;center_x&#39;</span><span class="p">:</span> <span class="o">.</span><span class="mi">5</span><span class="p">,</span><span class="s1">&#39;center_y&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span><span class="n">on_press</span><span class="o">=</span><span class="k">lambda</span> <span class="n">a</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">popup</span><span class="o">.</span><span class="n">dismiss</span><span class="p">()))</span>
        
        <span class="c1">#Add popup widget to root</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">popup</span> <span class="o">=</span> <span class="n">Popup</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Remove Location&quot;</span><span class="p">,</span> <span class="n">auto_dismiss</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">size_hint</span><span class="o">=</span><span class="p">(</span><span class="o">.</span><span class="mi">9</span><span class="p">,</span><span class="o">.</span><span class="mi">8</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">popup</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">popup</span><span class="o">.</span><span class="n">open</span><span class="p">()</span></div></div>
                          

<div class="viewcode-block" id="DroneMarkerLayer"><a class="viewcode-back" href="../../source/DroneProject.html#DroneProject.MapViewApp.DroneMarkerLayer">[docs]</a><span class="k">class</span> <span class="nc">DroneMarkerLayer</span><span class="p">(</span><span class="n">MapLayer</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Class related to CRUD drones operations</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">droneview</span> <span class="o">=</span> <span class="kc">None</span>
    
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">DroneMarkerLayer</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">zoom</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">droneview</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span>
    
<div class="viewcode-block" id="DroneMarkerLayer.add_virtual_drone"><a class="viewcode-back" href="../../source/DroneProject.html#DroneProject.MapViewApp.DroneMarkerLayer.add_virtual_drone">[docs]</a>    <span class="k">def</span> <span class="nf">add_virtual_drone</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">home</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a virtual drone to the system</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">global</span> <span class="n">locations</span>
        <span class="k">if</span> <span class="nb">int</span><span class="p">(</span><span class="n">home</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="nb">len</span><span class="p">(</span><span class="n">locations</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">location</span> <span class="ow">in</span> <span class="n">locations</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">location</span><span class="o">.</span><span class="n">getlocationname</span><span class="p">()</span> <span class="o">==</span> <span class="n">locations</span><span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">home</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">getlocationname</span><span class="p">():</span>
                    <span class="n">home_loc</span> <span class="o">=</span> <span class="n">location</span>
                    
                    <span class="k">global</span> <span class="n">drones</span>
                    <span class="n">newdrone</span> <span class="o">=</span> <span class="n">VirtualDrone</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="s2">&quot;Virtual&quot;</span><span class="p">,</span> <span class="nb">float</span><span class="p">(</span><span class="n">home_loc</span><span class="o">.</span><span class="n">getlocationlatitude</span><span class="p">()),</span> <span class="nb">float</span><span class="p">(</span><span class="n">home_loc</span><span class="o">.</span><span class="n">getlocationlongitude</span><span class="p">()),</span> <span class="nb">float</span><span class="p">(</span><span class="n">home_loc</span><span class="o">.</span><span class="n">getlocationlatitude</span><span class="p">()),</span> <span class="nb">float</span><span class="p">(</span><span class="n">home_loc</span><span class="o">.</span><span class="n">getlocationlongitude</span><span class="p">()),</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;Grounded&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
                    <span class="k">break</span>
            

            <span class="n">drones</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">newdrone</span><span class="p">)</span>
            <span class="n">SaveDroneList</span><span class="p">(</span><span class="n">drones</span><span class="p">)</span></div>
      
<div class="viewcode-block" id="DroneMarkerLayer.add_virtual_drone_popup"><a class="viewcode-back" href="../../source/DroneProject.html#DroneProject.MapViewApp.DroneMarkerLayer.add_virtual_drone_popup">[docs]</a>    <span class="k">def</span> <span class="nf">add_virtual_drone_popup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Popup to add virtual drone to the system</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">global</span> <span class="n">drones</span>
        <span class="k">global</span> <span class="n">locations</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span> <span class="o">=</span> <span class="n">BoxLayout</span><span class="p">(</span><span class="n">orientation</span><span class="o">=</span><span class="s1">&#39;vertical&#39;</span><span class="p">,</span><span class="n">spacing</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
        <span class="n">nameinput</span> <span class="o">=</span> <span class="n">TextInput</span><span class="p">(</span><span class="n">hint_text</span><span class="o">=</span><span class="s2">&quot;drone name&quot;</span><span class="p">,</span> <span class="n">multiline</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">size_hint</span><span class="o">=</span><span class="p">(</span><span class="o">.</span><span class="mi">9</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span><span class="n">pos_hint</span> <span class="o">=</span><span class="p">{</span><span class="s1">&#39;center_x&#39;</span><span class="p">:</span> <span class="o">.</span><span class="mi">5</span><span class="p">,</span><span class="s1">&#39;center_y&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span><span class="n">height</span><span class="o">=</span><span class="mi">40</span><span class="p">)</span>        
        <span class="n">homeinput</span> <span class="o">=</span> <span class="n">FloatInput</span><span class="p">(</span><span class="n">hint_text</span><span class="o">=</span><span class="s2">&quot;home location name&quot;</span><span class="p">,</span> <span class="n">multiline</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">size_hint</span><span class="o">=</span><span class="p">(</span><span class="o">.</span><span class="mi">9</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span><span class="n">pos_hint</span> <span class="o">=</span><span class="p">{</span><span class="s1">&#39;center_x&#39;</span><span class="p">:</span> <span class="o">.</span><span class="mi">5</span><span class="p">,</span><span class="s1">&#39;center_y&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span><span class="n">height</span><span class="o">=</span><span class="mi">40</span><span class="p">)</span>
        
        <span class="c1">#Text boxes to add location info</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="n">nameinput</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        
        <span class="n">locationlistview</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">text</span><span class="o">=</span> <span class="n">location_list</span><span class="p">(),</span><span class="n">size_hint</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>        
        <span class="n">locationlistviewscroll</span> <span class="o">=</span> <span class="n">ScrollView</span><span class="p">(</span><span class="n">size_hint</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="n">Window</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="n">Window</span><span class="o">.</span><span class="n">height</span><span class="o">/</span><span class="mi">4</span><span class="p">),</span> <span class="n">do_scroll_x</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">scroll_type</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;bars&#39;</span><span class="p">,</span><span class="s1">&#39;content&#39;</span><span class="p">],</span> <span class="n">bar_width</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="n">pos_hint</span> <span class="o">=</span><span class="p">{</span><span class="s1">&#39;center_x&#39;</span><span class="p">:</span> <span class="o">.</span><span class="mi">5</span><span class="p">,</span><span class="s1">&#39;center_y&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>
        <span class="n">locationlistviewscroll</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="n">locationlistview</span><span class="p">)</span>
        <span class="n">locationlistviewscroll</span><span class="o">.</span><span class="n">effect_cls</span><span class="o">.</span><span class="n">spring_constant</span><span class="o">=</span><span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="n">locationlistviewscroll</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="n">homeinput</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="n">Button</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;AddDrone&quot;</span><span class="p">,</span><span class="n">size_hint</span><span class="o">=</span><span class="p">(</span><span class="o">.</span><span class="mi">9</span><span class="p">,</span> <span class="o">.</span><span class="mi">8</span><span class="p">),</span><span class="n">pos_hint</span> <span class="o">=</span><span class="p">{</span><span class="s1">&#39;center_x&#39;</span><span class="p">:</span> <span class="o">.</span><span class="mi">5</span><span class="p">,</span><span class="s1">&#39;center_y&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span><span class="n">on_press</span><span class="o">=</span><span class="k">lambda</span> <span class="n">a</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_virtual_drone</span><span class="p">(</span><span class="n">nameinput</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="n">homeinput</span><span class="o">.</span><span class="n">text</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">popup</span> <span class="o">=</span> <span class="n">Popup</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Add Drone&quot;</span><span class="p">,</span> <span class="n">auto_dismiss</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">size_hint</span><span class="o">=</span><span class="p">(</span><span class="o">.</span><span class="mi">9</span><span class="p">,</span><span class="o">.</span><span class="mi">8</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="n">Button</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;Close window&quot;</span><span class="p">,</span> <span class="n">background_color</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span><span class="n">size_hint</span><span class="o">=</span><span class="p">(</span><span class="o">.</span><span class="mi">9</span><span class="p">,</span> <span class="o">.</span><span class="mi">8</span><span class="p">),</span><span class="n">pos_hint</span> <span class="o">=</span><span class="p">{</span><span class="s1">&#39;center_x&#39;</span><span class="p">:</span> <span class="o">.</span><span class="mi">5</span><span class="p">,</span><span class="s1">&#39;center_y&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span><span class="n">on_press</span><span class="o">=</span><span class="k">lambda</span> <span class="n">a</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">popup</span><span class="o">.</span><span class="n">dismiss</span><span class="p">()))</span>
        
        <span class="c1">#Add popup widget to root</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">popup</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">)</span>    
        <span class="bp">self</span><span class="o">.</span><span class="n">popup</span><span class="o">.</span><span class="n">open</span><span class="p">()</span></div>
      
<div class="viewcode-block" id="DroneMarkerLayer.remove_drone_popup"><a class="viewcode-back" href="../../source/DroneProject.html#DroneProject.MapViewApp.DroneMarkerLayer.remove_drone_popup">[docs]</a>    <span class="k">def</span> <span class="nf">remove_drone_popup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Popup the remove a drone from the system </span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">def</span> <span class="nf">buttonPressRemoveDrone</span><span class="p">(</span><span class="n">selection</span><span class="p">):</span>
            <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Function removes drone when button pressed</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="k">global</span> <span class="n">drones</span>
            <span class="k">if</span> <span class="nb">int</span><span class="p">(</span><span class="n">selection</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">1</span> <span class="ow">or</span> <span class="nb">int</span><span class="p">(</span><span class="n">selection</span><span class="p">)</span> <span class="o">&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">drones</span><span class="p">):</span>
                <span class="k">return</span>
            
            <span class="k">del</span> <span class="n">drones</span><span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">selection</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">SaveDroneList</span><span class="p">(</span><span class="n">drones</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span> <span class="o">=</span> <span class="n">BoxLayout</span><span class="p">(</span><span class="n">orientation</span><span class="o">=</span><span class="s1">&#39;vertical&#39;</span><span class="p">,</span><span class="n">spacing</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
        
        <span class="c1">#Scrollable Drone list</span>
        <span class="n">dronelistview</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">text</span><span class="o">=</span> <span class="n">drone_list</span><span class="p">(),</span><span class="n">size_hint</span><span class="o">=</span><span class="p">(</span><span class="mf">1.01</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>
        <span class="n">dronelistviewscroll</span> <span class="o">=</span> <span class="n">ScrollView</span><span class="p">(</span><span class="n">size_hint</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="n">Window</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="n">Window</span><span class="o">.</span><span class="n">height</span><span class="o">/</span><span class="mi">4</span><span class="p">),</span> <span class="n">do_scroll_x</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">scroll_type</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;bars&#39;</span><span class="p">,</span><span class="s1">&#39;content&#39;</span><span class="p">],</span> <span class="n">bar_width</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="n">pos_hint</span> <span class="o">=</span><span class="p">{</span><span class="s1">&#39;center_x&#39;</span><span class="p">:</span> <span class="o">.</span><span class="mi">5</span><span class="p">,</span><span class="s1">&#39;center_y&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>
        <span class="n">dronelistviewscroll</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="n">dronelistview</span><span class="p">)</span> 
        <span class="n">dronelistviewscroll</span><span class="o">.</span><span class="n">effect_cls</span><span class="o">.</span><span class="n">spring_constant</span><span class="o">=</span><span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="n">dronelistviewscroll</span><span class="p">)</span>
        
        <span class="c1">#Input box</span>
        <span class="n">location</span> <span class="o">=</span> <span class="n">FloatInput</span><span class="p">(</span><span class="n">hint_text</span><span class="o">=</span><span class="s2">&quot;Enter Number corresponding to drone&quot;</span><span class="p">,</span> <span class="n">multiline</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">size_hint</span><span class="o">=</span><span class="p">(</span><span class="o">.</span><span class="mi">9</span><span class="p">,</span><span class="kc">None</span><span class="p">),</span> <span class="n">pos_hint</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;center_x&#39;</span><span class="p">:</span> <span class="o">.</span><span class="mi">5</span><span class="p">,</span><span class="s1">&#39;center_y&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span><span class="n">height</span><span class="o">=</span><span class="mi">40</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="n">location</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="n">Button</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;RemoveDrone&quot;</span><span class="p">,</span> <span class="n">size_hint</span><span class="o">=</span><span class="p">(</span><span class="o">.</span><span class="mi">9</span><span class="p">,</span><span class="o">.</span><span class="mi">7</span><span class="p">),</span> <span class="n">pos_hint</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;center_x&#39;</span><span class="p">:</span> <span class="o">.</span><span class="mi">5</span><span class="p">,</span><span class="s1">&#39;center_y&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span><span class="n">on_press</span><span class="o">=</span><span class="k">lambda</span> <span class="n">a</span><span class="p">:</span> <span class="n">buttonPressRemoveDrone</span><span class="p">(</span><span class="n">location</span><span class="o">.</span><span class="n">text</span><span class="p">)))</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="n">Button</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;Close window&quot;</span><span class="p">,</span> <span class="n">background_color</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span> <span class="n">size_hint</span><span class="o">=</span><span class="p">(</span><span class="o">.</span><span class="mi">9</span><span class="p">,</span><span class="o">.</span><span class="mi">7</span><span class="p">),</span> <span class="n">pos_hint</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;center_x&#39;</span><span class="p">:</span> <span class="o">.</span><span class="mi">5</span><span class="p">,</span><span class="s1">&#39;center_y&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span><span class="n">on_press</span><span class="o">=</span><span class="k">lambda</span> <span class="n">a</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">popup</span><span class="o">.</span><span class="n">dismiss</span><span class="p">()))</span>
        
        <span class="c1">#Add popup widget to root</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">popup</span> <span class="o">=</span> <span class="n">Popup</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Remove Drone&quot;</span><span class="p">,</span> <span class="n">auto_dismiss</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">size_hint</span><span class="o">=</span><span class="p">(</span><span class="o">.</span><span class="mi">9</span><span class="p">,</span><span class="o">.</span><span class="mi">8</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">popup</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">popup</span><span class="o">.</span><span class="n">open</span><span class="p">()</span></div>
        
<div class="viewcode-block" id="DroneMarkerLayer.insert_drone_image"><a class="viewcode-back" href="../../source/DroneProject.html#DroneProject.MapViewApp.DroneMarkerLayer.insert_drone_image">[docs]</a>    <span class="k">def</span> <span class="nf">insert_drone_image</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">drone</span><span class="p">,</span> <span class="o">*</span><span class="n">largs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Used to choose suitable image for drawing drone marker on screen </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">droneview</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span>
        <span class="k">if</span> <span class="n">drone</span><span class="o">.</span><span class="n">getdronestate</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;Descending&quot;</span> <span class="ow">and</span> <span class="n">drone</span><span class="o">.</span><span class="n">getbattery</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">50</span><span class="p">:</span>
            <span class="n">droneview</span><span class="o">.</span><span class="n">add_marker</span><span class="p">(</span><span class="n">MapMarker</span><span class="p">(</span><span class="n">lat</span><span class="o">=</span><span class="n">drone</span><span class="o">.</span><span class="n">getcurrentlatitude</span><span class="p">(),</span> <span class="n">lon</span><span class="o">=</span><span class="n">drone</span><span class="o">.</span><span class="n">getcurrentlongitude</span><span class="p">(),</span> <span class="n">source</span><span class="o">=</span><span class="s2">&quot;images/DroneDescending.png&quot;</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">drone</span><span class="o">.</span><span class="n">getdronestate</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;Descending&quot;</span> <span class="ow">and</span> <span class="n">drone</span><span class="o">.</span><span class="n">getbattery</span><span class="p">()</span> <span class="o">&lt;=</span> <span class="mi">50</span><span class="p">:</span>
            <span class="n">droneview</span><span class="o">.</span><span class="n">add_marker</span><span class="p">(</span><span class="n">MapMarker</span><span class="p">(</span><span class="n">lat</span><span class="o">=</span><span class="n">drone</span><span class="o">.</span><span class="n">getcurrentlatitude</span><span class="p">(),</span> <span class="n">lon</span><span class="o">=</span><span class="n">drone</span><span class="o">.</span><span class="n">getcurrentlongitude</span><span class="p">(),</span> <span class="n">source</span><span class="o">=</span><span class="s2">&quot;images/DroneDescending50batt.png&quot;</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">drone</span><span class="o">.</span><span class="n">getdronestate</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;Descending&quot;</span> <span class="ow">and</span> <span class="n">drone</span><span class="o">.</span><span class="n">getbattery</span><span class="p">()</span> <span class="o">&lt;=</span> <span class="mi">10</span><span class="p">:</span>
            <span class="n">droneview</span><span class="o">.</span><span class="n">add_marker</span><span class="p">(</span><span class="n">MapMarker</span><span class="p">(</span><span class="n">lat</span><span class="o">=</span><span class="n">drone</span><span class="o">.</span><span class="n">getcurrentlatitude</span><span class="p">(),</span> <span class="n">lon</span><span class="o">=</span><span class="n">drone</span><span class="o">.</span><span class="n">getcurrentlongitude</span><span class="p">(),</span> <span class="n">source</span><span class="o">=</span><span class="s2">&quot;images/DroneDescending10batt.png&quot;</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">drone</span><span class="o">.</span><span class="n">getdronestate</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;Ascending&quot;</span> <span class="ow">and</span> <span class="n">drone</span><span class="o">.</span><span class="n">getbattery</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">50</span><span class="p">:</span>
            <span class="n">droneview</span><span class="o">.</span><span class="n">add_marker</span><span class="p">(</span><span class="n">MapMarker</span><span class="p">(</span><span class="n">lat</span><span class="o">=</span><span class="n">drone</span><span class="o">.</span><span class="n">getcurrentlatitude</span><span class="p">(),</span> <span class="n">lon</span><span class="o">=</span><span class="n">drone</span><span class="o">.</span><span class="n">getcurrentlongitude</span><span class="p">(),</span> <span class="n">source</span><span class="o">=</span><span class="s2">&quot;images/DroneAscending.png&quot;</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">drone</span><span class="o">.</span><span class="n">getdronestate</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;Ascending&quot;</span> <span class="ow">and</span> <span class="n">drone</span><span class="o">.</span><span class="n">getbattery</span><span class="p">()</span> <span class="o">&lt;=</span> <span class="mi">50</span><span class="p">:</span>
            <span class="n">droneview</span><span class="o">.</span><span class="n">add_marker</span><span class="p">(</span><span class="n">MapMarker</span><span class="p">(</span><span class="n">lat</span><span class="o">=</span><span class="n">drone</span><span class="o">.</span><span class="n">getcurrentlatitude</span><span class="p">(),</span> <span class="n">lon</span><span class="o">=</span><span class="n">drone</span><span class="o">.</span><span class="n">getcurrentlongitude</span><span class="p">(),</span> <span class="n">source</span><span class="o">=</span><span class="s2">&quot;images/DroneAscending50batt.png&quot;</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">drone</span><span class="o">.</span><span class="n">getdronestate</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;Ascending&quot;</span> <span class="ow">and</span> <span class="n">drone</span><span class="o">.</span><span class="n">getbattery</span><span class="p">()</span> <span class="o">&lt;=</span> <span class="mi">10</span><span class="p">:</span>
            <span class="n">droneview</span><span class="o">.</span><span class="n">add_marker</span><span class="p">(</span><span class="n">MapMarker</span><span class="p">(</span><span class="n">lat</span><span class="o">=</span><span class="n">drone</span><span class="o">.</span><span class="n">getcurrentlatitude</span><span class="p">(),</span> <span class="n">lon</span><span class="o">=</span><span class="n">drone</span><span class="o">.</span><span class="n">getcurrentlongitude</span><span class="p">(),</span> <span class="n">source</span><span class="o">=</span><span class="s2">&quot;images/DroneAscending10batt.png&quot;</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">drone</span><span class="o">.</span><span class="n">getbattery</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">50</span><span class="p">:</span>
            <span class="n">droneview</span><span class="o">.</span><span class="n">add_marker</span><span class="p">(</span><span class="n">MapMarker</span><span class="p">(</span><span class="n">lat</span><span class="o">=</span><span class="n">drone</span><span class="o">.</span><span class="n">getcurrentlatitude</span><span class="p">(),</span> <span class="n">lon</span><span class="o">=</span><span class="n">drone</span><span class="o">.</span><span class="n">getcurrentlongitude</span><span class="p">(),</span> <span class="n">source</span><span class="o">=</span><span class="s2">&quot;images/Drone.png&quot;</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">drone</span><span class="o">.</span><span class="n">getbattery</span><span class="p">()</span> <span class="o">&lt;=</span> <span class="mi">50</span><span class="p">:</span>
            <span class="n">droneview</span><span class="o">.</span><span class="n">add_marker</span><span class="p">(</span><span class="n">MapMarker</span><span class="p">(</span><span class="n">lat</span><span class="o">=</span><span class="n">drone</span><span class="o">.</span><span class="n">getcurrentlatitude</span><span class="p">(),</span> <span class="n">lon</span><span class="o">=</span><span class="n">drone</span><span class="o">.</span><span class="n">getcurrentlongitude</span><span class="p">(),</span> <span class="n">source</span><span class="o">=</span><span class="s2">&quot;images/Drone50batt.png&quot;</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">droneview</span><span class="o">.</span><span class="n">add_marker</span><span class="p">(</span><span class="n">MapMarker</span><span class="p">(</span><span class="n">lat</span><span class="o">=</span><span class="n">drone</span><span class="o">.</span><span class="n">getcurrentlatitude</span><span class="p">(),</span> <span class="n">lon</span><span class="o">=</span><span class="n">drone</span><span class="o">.</span><span class="n">getcurrentlongitude</span><span class="p">(),</span> <span class="n">source</span><span class="o">=</span><span class="s2">&quot;images/Drone10batt.png&quot;</span><span class="p">))</span></div>
       
<div class="viewcode-block" id="DroneMarkerLayer.draw_drones"><a class="viewcode-back" href="../../source/DroneProject.html#DroneProject.MapViewApp.DroneMarkerLayer.draw_drones">[docs]</a>    <span class="k">def</span> <span class="nf">draw_drones</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dronel</span><span class="p">,</span> <span class="n">locationl</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds drone markers to MapLayer</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">dronel</span> <span class="o">=</span> <span class="n">dronel</span>
        <span class="n">locationl</span> <span class="o">=</span> <span class="n">locationl</span>
        <span class="n">droneview</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">zoom</span> <span class="o">=</span> <span class="n">droneview</span><span class="o">.</span><span class="n">zoom</span>
        <span class="k">global</span> <span class="n">drones</span>
        <span class="k">global</span> <span class="n">drone_hidden</span>
        <span class="k">global</span> <span class="n">flights</span>
        
        <span class="n">flightinprogress</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">for</span> <span class="n">drone</span> <span class="ow">in</span> <span class="n">drones</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">drone</span><span class="o">.</span><span class="n">getdronestate</span><span class="p">()</span> <span class="o">!=</span> <span class="s2">&quot;Grounded&quot;</span><span class="p">:</span>
                <span class="n">flightinprogress</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">break</span>
        <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1">#Used to draw the drones once when not in flight</span>
        <span class="k">while</span> <span class="p">(</span><span class="n">drone_hidden</span> <span class="o">==</span> <span class="kc">False</span> <span class="ow">and</span> <span class="n">flightinprogress</span> <span class="o">==</span> <span class="kc">True</span><span class="p">)</span> <span class="ow">or</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">droneview</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">child</span><span class="p">)</span> <span class="ow">is</span> <span class="n">MarkerMapLayer</span><span class="p">:</span>
                    <span class="n">child</span><span class="o">.</span><span class="n">clear_widgets</span><span class="p">()</span>
                    <span class="k">break</span>
            <span class="c1">#Draw location markers if they should be seen        </span>
            <span class="k">if</span> <span class="n">location_hidden</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
                <span class="n">Clock</span><span class="o">.</span><span class="n">schedule_once</span><span class="p">(</span><span class="n">partial</span><span class="p">(</span><span class="n">locationl</span><span class="o">.</span><span class="n">draw_locations</span><span class="p">))</span>
            <span class="k">for</span> <span class="n">drone</span> <span class="ow">in</span> <span class="n">drones</span><span class="p">:</span>  
                <span class="c1">#Draw Drone markers</span>
                <span class="n">Clock</span><span class="o">.</span><span class="n">schedule_once</span><span class="p">(</span><span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">insert_drone_image</span><span class="p">,</span> <span class="n">drone</span><span class="p">))</span>
            
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="o">.</span><span class="mi">05</span><span class="p">)</span>
            <span class="n">i</span> <span class="o">=</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span></div></div>
                

<div class="viewcode-block" id="FlightLayer"><a class="viewcode-back" href="../../source/DroneProject.html#DroneProject.MapViewApp.FlightLayer">[docs]</a><span class="k">class</span> <span class="nc">FlightLayer</span><span class="p">(</span><span class="n">MapLayer</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Class related to flight CRUD operations</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">FlightLayer</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">zoom</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">droneview</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span>
    
<div class="viewcode-block" id="FlightLayer.view_flights_popup"><a class="viewcode-back" href="../../source/DroneProject.html#DroneProject.MapViewApp.FlightLayer.view_flights_popup">[docs]</a>    <span class="k">def</span> <span class="nf">view_flights_popup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Displays list of flights on system</span>
<span class="sd">        &quot;&quot;&quot;</span>
           
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span> <span class="o">=</span> <span class="n">BoxLayout</span><span class="p">(</span><span class="n">orientation</span><span class="o">=</span><span class="s1">&#39;vertical&#39;</span><span class="p">,</span><span class="n">spacing</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
        
        <span class="n">flightlistview</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">text</span><span class="o">=</span> <span class="n">flight_list</span><span class="p">(),</span><span class="n">size_hint</span><span class="o">=</span><span class="p">(</span><span class="mf">1.01</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>
        <span class="n">flightlistviewscroll</span> <span class="o">=</span> <span class="n">ScrollView</span><span class="p">(</span><span class="n">size_hint</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="n">Window</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="n">Window</span><span class="o">.</span><span class="n">height</span><span class="o">/</span><span class="mi">2</span><span class="p">),</span><span class="n">scroll_y</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">scroll_type</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;bars&#39;</span><span class="p">,</span><span class="s1">&#39;content&#39;</span><span class="p">],</span> <span class="n">bar_width</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="n">pos_hint</span> <span class="o">=</span><span class="p">{</span><span class="s1">&#39;center_x&#39;</span><span class="p">:</span> <span class="o">.</span><span class="mi">5</span><span class="p">,</span><span class="s1">&#39;center_y&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>
        <span class="n">flightlistviewscroll</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="n">flightlistview</span><span class="p">)</span>
        <span class="n">flightlistviewscroll</span><span class="o">.</span><span class="n">effect_cls</span><span class="o">.</span><span class="n">spring_constant</span><span class="o">=</span><span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="n">flightlistviewscroll</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="n">Button</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;Close window&quot;</span><span class="p">,</span> <span class="n">background_color</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span> <span class="n">size_hint</span><span class="o">=</span><span class="p">(</span><span class="o">.</span><span class="mi">9</span><span class="p">,</span><span class="o">.</span><span class="mi">7</span><span class="p">),</span> <span class="n">pos_hint</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;center_x&#39;</span><span class="p">:</span> <span class="o">.</span><span class="mi">5</span><span class="p">,</span><span class="s1">&#39;center_y&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span><span class="n">on_press</span><span class="o">=</span><span class="k">lambda</span> <span class="n">a</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">popup</span><span class="o">.</span><span class="n">dismiss</span><span class="p">()))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">popup</span> <span class="o">=</span> <span class="n">Popup</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;View Flight List&quot;</span><span class="p">,</span> <span class="n">auto_dismiss</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">size_hint</span><span class="o">=</span><span class="p">(</span><span class="o">.</span><span class="mi">9</span><span class="p">,</span><span class="o">.</span><span class="mi">7</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">popup</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">popup</span><span class="o">.</span><span class="n">open</span><span class="p">()</span>  </div>
    

<div class="viewcode-block" id="FlightLayer.create_flight_popup"><a class="viewcode-back" href="../../source/DroneProject.html#DroneProject.MapViewApp.FlightLayer.create_flight_popup">[docs]</a>    <span class="k">def</span> <span class="nf">create_flight_popup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Popup used to add flights to the system</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">mapview</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span>
        <span class="k">global</span> <span class="n">flights</span>
        <span class="k">global</span> <span class="n">locations</span>
        <span class="k">global</span> <span class="n">drones</span>
        <span class="n">new_flight</span> <span class="o">=</span> <span class="n">Flight</span><span class="p">(</span><span class="s2">&quot;F&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;D&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
        
        <span class="k">def</span> <span class="nf">buttonPressAddFlightName</span><span class="p">(</span><span class="n">newflight</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
            <span class="n">newflight</span><span class="o">.</span><span class="n">setflightid</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        
        <span class="k">def</span> <span class="nf">buttonPressAddDrone</span><span class="p">(</span><span class="n">newflight</span><span class="p">,</span> <span class="n">drones</span><span class="p">,</span> <span class="n">selection</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">drone</span> <span class="ow">in</span> <span class="n">drones</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">drone</span><span class="o">.</span><span class="n">drone_id</span> <span class="o">==</span> <span class="n">drones</span><span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">selection</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">drone_id</span><span class="p">:</span>
                    <span class="n">newflight</span><span class="o">.</span><span class="n">setdrone</span><span class="p">(</span><span class="n">drone</span><span class="o">.</span><span class="n">drone_id</span><span class="p">)</span>
                    <span class="n">newflight</span><span class="o">.</span><span class="n">setstartlatitude</span><span class="p">(</span><span class="n">drone</span><span class="o">.</span><span class="n">gethomelatitude</span><span class="p">())</span>
                    <span class="n">newflight</span><span class="o">.</span><span class="n">setstartlongitude</span><span class="p">(</span><span class="n">drone</span><span class="o">.</span><span class="n">gethomelongitude</span><span class="p">())</span>
        
        <span class="k">def</span> <span class="nf">buttonPressAddDestination</span><span class="p">(</span><span class="n">newflight</span><span class="p">,</span> <span class="n">locations</span><span class="p">,</span> <span class="n">selection</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">location</span> <span class="ow">in</span> <span class="n">locations</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">location</span><span class="o">.</span><span class="n">getlocationname</span><span class="p">()</span> <span class="o">==</span> <span class="n">locations</span><span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">selection</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">getlocationname</span><span class="p">():</span>
                    <span class="n">newflight</span><span class="o">.</span><span class="n">setdestinationlatitude</span><span class="p">(</span><span class="n">location</span><span class="o">.</span><span class="n">getlocationlatitude</span><span class="p">())</span>
                    <span class="n">newflight</span><span class="o">.</span><span class="n">setdestinationlongitude</span><span class="p">(</span><span class="n">location</span><span class="o">.</span><span class="n">getlocationlongitude</span><span class="p">())</span>
        <span class="c1">#Adds Flight to system Flight list   </span>
        <span class="k">def</span> <span class="nf">buttonPressAddFlight</span><span class="p">(</span><span class="n">newflight</span><span class="p">,</span> <span class="n">flights</span><span class="p">):</span>
            <span class="n">flights</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">newflight</span><span class="p">)</span>
            <span class="n">SaveFlightList</span><span class="p">(</span><span class="n">flights</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">popup</span><span class="o">.</span><span class="n">dismiss</span><span class="p">()</span>

        
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span> <span class="o">=</span> <span class="n">BoxLayout</span><span class="p">(</span><span class="n">orientation</span><span class="o">=</span><span class="s1">&#39;vertical&#39;</span><span class="p">,</span> <span class="n">spacing</span> <span class="o">=</span><span class="mi">5</span><span class="p">)</span>
        
        <span class="n">flightname</span> <span class="o">=</span> <span class="n">TextInput</span><span class="p">(</span><span class="n">hint_text</span><span class="o">=</span><span class="s2">&quot;Flight Name&quot;</span><span class="p">,</span> <span class="n">multiline</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">size_hint</span><span class="o">=</span><span class="p">(</span><span class="o">.</span><span class="mi">9</span><span class="p">,</span> <span class="o">.</span><span class="mi">8</span><span class="p">),</span><span class="n">pos_hint</span> <span class="o">=</span><span class="p">{</span><span class="s1">&#39;center_x&#39;</span><span class="p">:</span> <span class="o">.</span><span class="mi">5</span><span class="p">,</span><span class="s1">&#39;center_y&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="n">flightname</span><span class="p">)</span>
        
        <span class="c1">#Scrollable Drone list</span>
        <span class="n">dronelistview</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">text</span><span class="o">=</span> <span class="n">drone_list</span><span class="p">(),</span><span class="n">size_hint</span><span class="o">=</span><span class="p">(</span><span class="mf">1.01</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>
        <span class="n">dronelistviewscroll</span> <span class="o">=</span> <span class="n">ScrollView</span><span class="p">(</span><span class="n">size_hint</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="n">Window</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="n">Window</span><span class="o">.</span><span class="n">height</span><span class="o">/</span><span class="mi">8</span><span class="p">),</span> <span class="n">do_scroll_x</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">scroll_type</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;bars&#39;</span><span class="p">,</span><span class="s1">&#39;content&#39;</span><span class="p">],</span> <span class="n">bar_width</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="n">pos_hint</span> <span class="o">=</span><span class="p">{</span><span class="s1">&#39;center_x&#39;</span><span class="p">:</span> <span class="o">.</span><span class="mi">5</span><span class="p">,</span><span class="s1">&#39;center_y&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>
        <span class="n">dronelistviewscroll</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="n">dronelistview</span><span class="p">)</span> 
        <span class="n">dronelistviewscroll</span><span class="o">.</span><span class="n">effect_cls</span><span class="o">.</span><span class="n">spring_constant</span><span class="o">=</span><span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="n">dronelistviewscroll</span><span class="p">)</span>
        
        <span class="n">drone</span> <span class="o">=</span> <span class="n">FloatInput</span><span class="p">(</span><span class="n">hint_text</span><span class="o">=</span><span class="s2">&quot;Drone choice&quot;</span><span class="p">,</span> <span class="n">multiline</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">size_hint</span><span class="o">=</span><span class="p">(</span><span class="o">.</span><span class="mi">9</span><span class="p">,</span> <span class="o">.</span><span class="mi">8</span><span class="p">),</span><span class="n">pos_hint</span> <span class="o">=</span><span class="p">{</span><span class="s1">&#39;center_x&#39;</span><span class="p">:</span> <span class="o">.</span><span class="mi">5</span><span class="p">,</span><span class="s1">&#39;center_y&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="n">drone</span><span class="p">)</span>
        
        <span class="n">locationlistview</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">text</span><span class="o">=</span> <span class="n">location_list</span><span class="p">(),</span><span class="n">size_hint</span><span class="o">=</span><span class="p">(</span><span class="mf">1.01</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>
        <span class="n">locationlistviewscroll</span> <span class="o">=</span> <span class="n">ScrollView</span><span class="p">(</span><span class="n">size_hint</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="n">Window</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="n">Window</span><span class="o">.</span><span class="n">height</span><span class="o">/</span><span class="mi">8</span><span class="p">),</span> <span class="n">do_scroll_x</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">scroll_y</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">scroll_type</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;bars&#39;</span><span class="p">,</span><span class="s1">&#39;content&#39;</span><span class="p">],</span> <span class="n">bar_width</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="n">pos_hint</span> <span class="o">=</span><span class="p">{</span><span class="s1">&#39;center_x&#39;</span><span class="p">:</span> <span class="o">.</span><span class="mi">5</span><span class="p">,</span><span class="s1">&#39;center_y&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>
        <span class="n">locationlistviewscroll</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="n">locationlistview</span><span class="p">)</span>
        <span class="n">locationlistviewscroll</span><span class="o">.</span><span class="n">effect_cls</span><span class="o">.</span><span class="n">spring_constant</span><span class="o">=</span><span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="n">locationlistviewscroll</span><span class="p">)</span>
        
        <span class="n">location</span> <span class="o">=</span> <span class="n">FloatInput</span><span class="p">(</span><span class="n">hint_text</span><span class="o">=</span><span class="s2">&quot;Destination Choice&quot;</span><span class="p">,</span> <span class="n">multiline</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">size_hint</span><span class="o">=</span><span class="p">(</span><span class="o">.</span><span class="mi">9</span><span class="p">,</span> <span class="o">.</span><span class="mi">8</span><span class="p">),</span><span class="n">pos_hint</span> <span class="o">=</span><span class="p">{</span><span class="s1">&#39;center_x&#39;</span><span class="p">:</span> <span class="o">.</span><span class="mi">5</span><span class="p">,</span><span class="s1">&#39;center_y&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="n">location</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="n">Button</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;AddFlightName&quot;</span><span class="p">,</span><span class="n">size_hint</span><span class="o">=</span><span class="p">(</span><span class="o">.</span><span class="mi">9</span><span class="p">,</span> <span class="o">.</span><span class="mi">8</span><span class="p">),</span><span class="n">pos_hint</span> <span class="o">=</span><span class="p">{</span><span class="s1">&#39;center_x&#39;</span><span class="p">:</span> <span class="o">.</span><span class="mi">5</span><span class="p">,</span><span class="s1">&#39;center_y&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span><span class="n">on_press</span><span class="o">=</span><span class="k">lambda</span> <span class="n">a</span><span class="p">:</span> <span class="n">buttonPressAddFlightName</span><span class="p">(</span><span class="n">new_flight</span><span class="p">,</span> <span class="n">flightname</span><span class="o">.</span><span class="n">text</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="n">Button</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;AddDrone&quot;</span><span class="p">,</span><span class="n">size_hint</span><span class="o">=</span><span class="p">(</span><span class="o">.</span><span class="mi">9</span><span class="p">,</span> <span class="o">.</span><span class="mi">8</span><span class="p">),</span><span class="n">pos_hint</span> <span class="o">=</span><span class="p">{</span><span class="s1">&#39;center_x&#39;</span><span class="p">:</span> <span class="o">.</span><span class="mi">5</span><span class="p">,</span><span class="s1">&#39;center_y&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span><span class="n">on_press</span><span class="o">=</span><span class="k">lambda</span> <span class="n">a</span><span class="p">:</span> <span class="n">buttonPressAddDrone</span><span class="p">(</span><span class="n">new_flight</span><span class="p">,</span> <span class="n">drones</span><span class="p">,</span> <span class="n">drone</span><span class="o">.</span><span class="n">text</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="n">Button</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;AddDestination&quot;</span><span class="p">,</span><span class="n">size_hint</span><span class="o">=</span><span class="p">(</span><span class="o">.</span><span class="mi">9</span><span class="p">,</span> <span class="o">.</span><span class="mi">8</span><span class="p">),</span><span class="n">pos_hint</span> <span class="o">=</span><span class="p">{</span><span class="s1">&#39;center_x&#39;</span><span class="p">:</span> <span class="o">.</span><span class="mi">5</span><span class="p">,</span><span class="s1">&#39;center_y&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span><span class="n">on_press</span><span class="o">=</span><span class="k">lambda</span> <span class="n">a</span><span class="p">:</span> <span class="n">buttonPressAddDestination</span><span class="p">(</span><span class="n">new_flight</span><span class="p">,</span> <span class="n">locations</span><span class="p">,</span> <span class="n">location</span><span class="o">.</span><span class="n">text</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="n">Button</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;AddFlight&quot;</span><span class="p">,</span><span class="n">size_hint</span><span class="o">=</span><span class="p">(</span><span class="o">.</span><span class="mi">9</span><span class="p">,</span> <span class="o">.</span><span class="mi">8</span><span class="p">),</span><span class="n">pos_hint</span> <span class="o">=</span><span class="p">{</span><span class="s1">&#39;center_x&#39;</span><span class="p">:</span> <span class="o">.</span><span class="mi">5</span><span class="p">,</span><span class="s1">&#39;center_y&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span><span class="n">on_press</span><span class="o">=</span><span class="k">lambda</span> <span class="n">a</span><span class="p">:</span> <span class="n">buttonPressAddFlight</span><span class="p">(</span><span class="n">new_flight</span><span class="p">,</span> <span class="n">flights</span><span class="p">)))</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="n">Button</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;Close window&quot;</span><span class="p">,</span> <span class="n">background_color</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span><span class="n">size_hint</span><span class="o">=</span><span class="p">(</span><span class="o">.</span><span class="mi">9</span><span class="p">,</span> <span class="o">.</span><span class="mi">8</span><span class="p">),</span><span class="n">pos_hint</span> <span class="o">=</span><span class="p">{</span><span class="s1">&#39;center_x&#39;</span><span class="p">:</span> <span class="o">.</span><span class="mi">5</span><span class="p">,</span><span class="s1">&#39;center_y&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span><span class="n">on_press</span><span class="o">=</span><span class="k">lambda</span> <span class="n">a</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">popup</span><span class="o">.</span><span class="n">dismiss</span><span class="p">()))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">popup</span> <span class="o">=</span> <span class="n">Popup</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Add Flight&quot;</span><span class="p">,</span> <span class="n">auto_dismiss</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">size_hint</span><span class="o">=</span><span class="p">(</span><span class="o">.</span><span class="mi">9</span><span class="p">,</span><span class="o">.</span><span class="mi">8</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">popup</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">popup</span><span class="o">.</span><span class="n">open</span><span class="p">()</span>  </div>
     
<div class="viewcode-block" id="FlightLayer.remove_flight_popup"><a class="viewcode-back" href="../../source/DroneProject.html#DroneProject.MapViewApp.FlightLayer.remove_flight_popup">[docs]</a>    <span class="k">def</span> <span class="nf">remove_flight_popup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Remove flight popup </span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">def</span> <span class="nf">buttonPressRemoveFlight</span><span class="p">(</span><span class="n">selection</span><span class="p">):</span>
            <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Deletes flight from system on button press</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="k">global</span> <span class="n">flights</span>
            <span class="k">if</span> <span class="nb">int</span><span class="p">(</span><span class="n">selection</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="nb">len</span><span class="p">(</span><span class="n">flights</span><span class="p">):</span>
                <span class="k">del</span> <span class="n">flights</span><span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">selection</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="n">SaveFlightList</span><span class="p">(</span><span class="n">flights</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span> <span class="o">=</span> <span class="n">BoxLayout</span><span class="p">(</span><span class="n">orientation</span><span class="o">=</span><span class="s1">&#39;vertical&#39;</span><span class="p">,</span><span class="n">spacing</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
        
        <span class="n">flightlistview</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">text</span><span class="o">=</span> <span class="n">flight_list</span><span class="p">(),</span><span class="n">size_hint</span><span class="o">=</span><span class="p">(</span><span class="mf">1.01</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>
        <span class="n">flightlistviewscroll</span> <span class="o">=</span> <span class="n">ScrollView</span><span class="p">(</span><span class="n">size_hint</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="n">Window</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="n">Window</span><span class="o">.</span><span class="n">height</span><span class="o">/</span><span class="mi">4</span><span class="p">),</span><span class="n">scroll_y</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">scroll_type</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;bars&#39;</span><span class="p">,</span><span class="s1">&#39;content&#39;</span><span class="p">],</span> <span class="n">bar_width</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="n">pos_hint</span> <span class="o">=</span><span class="p">{</span><span class="s1">&#39;center_x&#39;</span><span class="p">:</span> <span class="o">.</span><span class="mi">5</span><span class="p">,</span><span class="s1">&#39;center_y&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>
        <span class="n">flightlistviewscroll</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="n">flightlistview</span><span class="p">)</span>
        <span class="n">flightlistviewscroll</span><span class="o">.</span><span class="n">effect_cls</span><span class="o">.</span><span class="n">spring_constant</span><span class="o">=</span><span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="n">flightlistviewscroll</span><span class="p">)</span>
        
        <span class="n">flight</span> <span class="o">=</span> <span class="n">FloatInput</span><span class="p">(</span><span class="n">hint_text</span><span class="o">=</span><span class="s2">&quot;Enter Number corresponding to flight&quot;</span><span class="p">,</span> <span class="n">multiline</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">size_hint</span><span class="o">=</span><span class="p">(</span><span class="o">.</span><span class="mi">9</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">pos_hint</span> <span class="o">=</span><span class="p">{</span><span class="s1">&#39;center_x&#39;</span><span class="p">:</span> <span class="o">.</span><span class="mi">5</span><span class="p">,</span><span class="s1">&#39;center_y&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span> <span class="n">height</span> <span class="o">=</span> <span class="mi">40</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="n">flight</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="n">Button</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;CancelFlight&quot;</span><span class="p">,</span><span class="n">size_hint</span><span class="o">=</span><span class="p">(</span><span class="o">.</span><span class="mi">9</span><span class="p">,</span> <span class="o">.</span><span class="mi">8</span><span class="p">),</span><span class="n">pos_hint</span> <span class="o">=</span><span class="p">{</span><span class="s1">&#39;center_x&#39;</span><span class="p">:</span> <span class="o">.</span><span class="mi">5</span><span class="p">,</span><span class="s1">&#39;center_y&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span><span class="n">on_press</span><span class="o">=</span><span class="k">lambda</span> <span class="n">a</span><span class="p">:</span> <span class="n">buttonPressRemoveFlight</span><span class="p">(</span><span class="n">flight</span><span class="o">.</span><span class="n">text</span><span class="p">)))</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="n">Button</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;Close window&quot;</span><span class="p">,</span> <span class="n">background_color</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span><span class="n">size_hint</span><span class="o">=</span><span class="p">(</span><span class="o">.</span><span class="mi">9</span><span class="p">,</span> <span class="o">.</span><span class="mi">8</span><span class="p">),</span><span class="n">pos_hint</span> <span class="o">=</span><span class="p">{</span><span class="s1">&#39;center_x&#39;</span><span class="p">:</span> <span class="o">.</span><span class="mi">5</span><span class="p">,</span><span class="s1">&#39;center_y&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span><span class="n">on_press</span><span class="o">=</span><span class="k">lambda</span> <span class="n">a</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">popup</span><span class="o">.</span><span class="n">dismiss</span><span class="p">()))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">popup</span> <span class="o">=</span> <span class="n">Popup</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Cancel Flight&quot;</span><span class="p">,</span> <span class="n">auto_dismiss</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">size_hint</span><span class="o">=</span><span class="p">(</span><span class="o">.</span><span class="mi">9</span><span class="p">,</span><span class="o">.</span><span class="mi">8</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">popup</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">popup</span><span class="o">.</span><span class="n">open</span><span class="p">()</span> </div>
    
   
<div class="viewcode-block" id="FlightLayer.abort_flight_popup"><a class="viewcode-back" href="../../source/DroneProject.html#DroneProject.MapViewApp.FlightLayer.abort_flight_popup">[docs]</a>    <span class="k">def</span> <span class="nf">abort_flight_popup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Abort flight popup</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">def</span> <span class="nf">buttonPressAbortFlight</span><span class="p">(</span><span class="n">selection</span><span class="p">):</span>
            <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Set flight parameter flight_abort to True, this will be checked </span>
<span class="sd">            by the DroneController.MoveDrone() function and the drone will be redirected</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="k">global</span> <span class="n">flights</span>
            <span class="n">flights</span><span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">selection</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">setflightabort</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">SaveFlightList</span><span class="p">(</span><span class="n">flights</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span> <span class="o">=</span> <span class="n">BoxLayout</span><span class="p">(</span><span class="n">orientation</span><span class="o">=</span><span class="s1">&#39;vertical&#39;</span><span class="p">,</span><span class="n">spacing</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
        
        <span class="c1">#Scrollable list of flights</span>
        <span class="n">flightlistview</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">text</span><span class="o">=</span> <span class="n">flight_list</span><span class="p">(),</span><span class="n">size_hint</span><span class="o">=</span><span class="p">(</span><span class="mf">1.01</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>
        <span class="n">flightlistviewscroll</span> <span class="o">=</span> <span class="n">ScrollView</span><span class="p">(</span><span class="n">size_hint</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="n">Window</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="n">Window</span><span class="o">.</span><span class="n">height</span><span class="o">/</span><span class="mi">4</span><span class="p">),</span><span class="n">scroll_y</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">scroll_type</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;bars&#39;</span><span class="p">,</span><span class="s1">&#39;content&#39;</span><span class="p">],</span> <span class="n">bar_width</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="n">pos_hint</span> <span class="o">=</span><span class="p">{</span><span class="s1">&#39;center_x&#39;</span><span class="p">:</span> <span class="o">.</span><span class="mi">5</span><span class="p">,</span><span class="s1">&#39;center_y&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>
        <span class="n">flightlistviewscroll</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="n">flightlistview</span><span class="p">)</span>
        <span class="n">flightlistviewscroll</span><span class="o">.</span><span class="n">effect_cls</span><span class="o">.</span><span class="n">spring_constant</span><span class="o">=</span><span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="n">flightlistviewscroll</span><span class="p">)</span>
        
        <span class="c1">#Input Box</span>
        <span class="n">flight</span> <span class="o">=</span> <span class="n">FloatInput</span><span class="p">(</span><span class="n">hint_text</span><span class="o">=</span><span class="s2">&quot;Enter Number corresponding to flight&quot;</span><span class="p">,</span> <span class="n">multiline</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">size_hint</span><span class="o">=</span><span class="p">(</span><span class="o">.</span><span class="mi">9</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">pos_hint</span> <span class="o">=</span><span class="p">{</span><span class="s1">&#39;center_x&#39;</span><span class="p">:</span> <span class="o">.</span><span class="mi">5</span><span class="p">,</span><span class="s1">&#39;center_y&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span><span class="n">height</span><span class="o">=</span><span class="mi">40</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="n">flight</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="n">Button</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;AbortFlight&quot;</span><span class="p">,</span><span class="n">size_hint</span><span class="o">=</span><span class="p">(</span><span class="o">.</span><span class="mi">9</span><span class="p">,</span> <span class="o">.</span><span class="mi">8</span><span class="p">),</span><span class="n">pos_hint</span> <span class="o">=</span><span class="p">{</span><span class="s1">&#39;center_x&#39;</span><span class="p">:</span> <span class="o">.</span><span class="mi">5</span><span class="p">,</span><span class="s1">&#39;center_y&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span><span class="n">on_press</span><span class="o">=</span><span class="k">lambda</span> <span class="n">a</span><span class="p">:</span> <span class="n">buttonPressAbortFlight</span><span class="p">(</span><span class="n">flight</span><span class="o">.</span><span class="n">text</span><span class="p">)))</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="n">Button</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;Close window&quot;</span><span class="p">,</span> <span class="n">background_color</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span><span class="n">size_hint</span><span class="o">=</span><span class="p">(</span><span class="o">.</span><span class="mi">9</span><span class="p">,</span> <span class="o">.</span><span class="mi">8</span><span class="p">),</span><span class="n">pos_hint</span> <span class="o">=</span><span class="p">{</span><span class="s1">&#39;center_x&#39;</span><span class="p">:</span> <span class="o">.</span><span class="mi">5</span><span class="p">,</span><span class="s1">&#39;center_y&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span><span class="n">on_press</span><span class="o">=</span><span class="k">lambda</span> <span class="n">a</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">popup</span><span class="o">.</span><span class="n">dismiss</span><span class="p">()))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">popup</span> <span class="o">=</span> <span class="n">Popup</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Abort Flight&quot;</span><span class="p">,</span> <span class="n">auto_dismiss</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">size_hint</span><span class="o">=</span><span class="p">(</span><span class="o">.</span><span class="mi">9</span><span class="p">,</span><span class="o">.</span><span class="mi">8</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">popup</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">popup</span><span class="o">.</span><span class="n">open</span><span class="p">()</span> </div>
      
<div class="viewcode-block" id="FlightLayer.start_flight_popup"><a class="viewcode-back" href="../../source/DroneProject.html#DroneProject.MapViewApp.FlightLayer.start_flight_popup">[docs]</a>    <span class="k">def</span> <span class="nf">start_flight_popup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Begin a flight popup</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">def</span> <span class="nf">buttonPressBeginFlight</span><span class="p">(</span><span class="n">selection</span><span class="p">):</span>
            <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Begins flight on button press</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="k">global</span> <span class="n">flights</span>
            <span class="k">global</span> <span class="n">locations</span>
            <span class="k">global</span> <span class="n">drones</span>
            <span class="k">global</span> <span class="n">threads</span>
            
            <span class="k">if</span> <span class="nb">int</span><span class="p">(</span><span class="n">selection</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="nb">len</span><span class="p">(</span><span class="n">flights</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">drone</span> <span class="ow">in</span> <span class="n">drones</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">drone</span><span class="o">.</span><span class="n">drone_id</span> <span class="o">==</span> <span class="n">flights</span><span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">selection</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">getdrone</span><span class="p">():</span>
                        <span class="n">flight_drone</span> <span class="o">=</span> <span class="n">drone</span>
                <span class="n">threads</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span> <span class="o">=</span> <span class="n">TakeOffFlyLand</span><span class="p">,</span>  <span class="n">args</span> <span class="o">=</span> <span class="p">(</span><span class="n">flight_drone</span><span class="p">,</span> <span class="n">flights</span><span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">selection</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">drones</span><span class="p">,</span> <span class="n">locations</span><span class="p">),</span> <span class="n">daemon</span> <span class="o">=</span> <span class="kc">True</span><span class="p">))</span>
                <span class="n">threads</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">threads</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span> <span class="o">=</span> <span class="n">BoxLayout</span><span class="p">(</span><span class="n">orientation</span><span class="o">=</span><span class="s1">&#39;vertical&#39;</span><span class="p">,</span><span class="n">spacing</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>

        <span class="n">flightlistview</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">text</span><span class="o">=</span> <span class="n">flight_list</span><span class="p">(),</span><span class="n">size_hint</span><span class="o">=</span><span class="p">(</span><span class="mf">1.01</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>
        <span class="n">flightlistviewscroll</span> <span class="o">=</span> <span class="n">ScrollView</span><span class="p">(</span><span class="n">size_hint</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="n">Window</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="n">Window</span><span class="o">.</span><span class="n">height</span><span class="o">/</span><span class="mi">4</span><span class="p">),</span><span class="n">scroll_y</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">scroll_type</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;bars&#39;</span><span class="p">,</span><span class="s1">&#39;content&#39;</span><span class="p">],</span> <span class="n">bar_width</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="n">pos_hint</span> <span class="o">=</span><span class="p">{</span><span class="s1">&#39;center_x&#39;</span><span class="p">:</span> <span class="o">.</span><span class="mi">5</span><span class="p">,</span><span class="s1">&#39;center_y&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>
        <span class="n">flightlistviewscroll</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="n">flightlistview</span><span class="p">)</span>
        <span class="n">flightlistviewscroll</span><span class="o">.</span><span class="n">effect_cls</span><span class="o">.</span><span class="n">spring_constant</span><span class="o">=</span><span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="n">flightlistviewscroll</span><span class="p">)</span>
        
        <span class="n">flight</span> <span class="o">=</span> <span class="n">FloatInput</span><span class="p">(</span><span class="n">hint_text</span><span class="o">=</span><span class="s2">&quot;Enter Number corresponding to flight&quot;</span><span class="p">,</span> <span class="n">multiline</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">size_hint</span><span class="o">=</span><span class="p">(</span><span class="o">.</span><span class="mi">9</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">pos_hint</span> <span class="o">=</span><span class="p">{</span><span class="s1">&#39;center_x&#39;</span><span class="p">:</span> <span class="o">.</span><span class="mi">5</span><span class="p">,</span><span class="s1">&#39;center_y&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span> <span class="n">height</span> <span class="o">=</span> <span class="mi">40</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="n">flight</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="n">Button</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;BeginFlight&quot;</span><span class="p">,</span><span class="n">size_hint</span><span class="o">=</span><span class="p">(</span><span class="o">.</span><span class="mi">9</span><span class="p">,</span> <span class="o">.</span><span class="mi">8</span><span class="p">),</span><span class="n">pos_hint</span> <span class="o">=</span><span class="p">{</span><span class="s1">&#39;center_x&#39;</span><span class="p">:</span> <span class="o">.</span><span class="mi">5</span><span class="p">,</span><span class="s1">&#39;center_y&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span><span class="n">on_press</span><span class="o">=</span><span class="k">lambda</span> <span class="n">a</span><span class="p">:</span> <span class="n">buttonPressBeginFlight</span><span class="p">(</span><span class="n">flight</span><span class="o">.</span><span class="n">text</span><span class="p">)))</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="n">Button</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;Close window&quot;</span><span class="p">,</span> <span class="n">background_color</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span><span class="n">size_hint</span><span class="o">=</span><span class="p">(</span><span class="o">.</span><span class="mi">9</span><span class="p">,</span> <span class="o">.</span><span class="mi">8</span><span class="p">),</span><span class="n">pos_hint</span> <span class="o">=</span><span class="p">{</span><span class="s1">&#39;center_x&#39;</span><span class="p">:</span> <span class="o">.</span><span class="mi">5</span><span class="p">,</span><span class="s1">&#39;center_y&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span><span class="n">on_press</span><span class="o">=</span><span class="k">lambda</span> <span class="n">a</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">popup</span><span class="o">.</span><span class="n">dismiss</span><span class="p">()))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">popup</span> <span class="o">=</span> <span class="n">Popup</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Start Flight&quot;</span><span class="p">,</span> <span class="n">auto_dismiss</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">size_hint</span><span class="o">=</span><span class="p">(</span><span class="o">.</span><span class="mi">9</span><span class="p">,</span><span class="o">.</span><span class="mi">8</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">popup</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">popup</span><span class="o">.</span><span class="n">open</span><span class="p">()</span>                        </div></div>
                      
<div class="viewcode-block" id="LineMapLayer"><a class="viewcode-back" href="../../source/DroneProject.html#DroneProject.MapViewApp.LineMapLayer">[docs]</a><span class="k">class</span> <span class="nc">LineMapLayer</span><span class="p">(</span><span class="n">MapLayer</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Class related to displaying lines between destinations !Currently incomplete</span>
<span class="sd">    &quot;&quot;&quot;</span>
    
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">LineMapLayer</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">zoom</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">mapview</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span>
        <span class="k">global</span> <span class="n">coordinates</span>
        
    
<div class="viewcode-block" id="LineMapLayer.reposition"><a class="viewcode-back" href="../../source/DroneProject.html#DroneProject.MapViewApp.LineMapLayer.reposition">[docs]</a>    <span class="k">def</span> <span class="nf">reposition</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">mapview</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span>
        <span class="k">global</span> <span class="n">corridors</span>
        
        <span class="c1">#: Must redraw when the zoom changes </span>
        <span class="c1">#: as the scatter transform resets for the new tiles</span>
        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">zoom</span> <span class="o">!=</span> <span class="n">mapview</span><span class="o">.</span><span class="n">zoom</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">draw_line</span><span class="p">()</span>           </div>

<div class="viewcode-block" id="LineMapLayer.create_corridor_popup"><a class="viewcode-back" href="../../source/DroneProject.html#DroneProject.MapViewApp.LineMapLayer.create_corridor_popup">[docs]</a>    <span class="k">def</span> <span class="nf">create_corridor_popup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">mapview</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span>
        <span class="k">global</span> <span class="n">coordinates</span>
        <span class="k">global</span> <span class="n">locations</span>
        <span class="k">global</span> <span class="n">corridors</span>
        <span class="n">corridortoadd</span> <span class="o">=</span> <span class="p">[]</span>
        
        <span class="k">def</span> <span class="nf">buttonPressAddLocation</span><span class="p">(</span><span class="n">coord</span><span class="p">,</span> <span class="n">corr</span><span class="p">,</span> <span class="n">corridortoadd</span><span class="p">,</span> <span class="n">selection</span><span class="p">):</span>
            <span class="n">corridortoadd</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">coord</span><span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">selection</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">coord</span><span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">selection</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">corridortoadd</span><span class="p">)</span>
            
        <span class="k">def</span> <span class="nf">buttonPressAddCorridor</span><span class="p">(</span><span class="n">corr</span><span class="p">):</span>
            <span class="k">global</span> <span class="n">corridors</span>
            <span class="n">corridors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">corridortoadd</span><span class="p">)</span>
            <span class="c1">#self.draw_line(corr)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">draw_line</span><span class="p">()</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Full corridors list:&quot;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">corridors</span><span class="p">)</span>

        
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span> <span class="o">=</span> <span class="n">BoxLayout</span><span class="p">(</span><span class="n">orientation</span><span class="o">=</span><span class="s1">&#39;vertical&#39;</span><span class="p">,</span> <span class="n">spacing</span> <span class="o">=</span><span class="mi">5</span><span class="p">)</span>
                
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="n">Label</span><span class="p">(</span><span class="n">text</span><span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">location_list</span><span class="p">()))</span>
        
        <span class="n">location</span> <span class="o">=</span> <span class="n">TextInput</span><span class="p">(</span><span class="n">hint_text</span><span class="o">=</span><span class="s2">&quot;Enter Number corresponding to flight&quot;</span><span class="p">,</span> <span class="n">multiline</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="n">location</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="n">Label</span><span class="p">(</span><span class="n">text</span><span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">corridortoadd</span><span class="p">)))</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="n">Button</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;AddLocation&quot;</span><span class="p">,</span><span class="n">on_press</span><span class="o">=</span><span class="k">lambda</span> <span class="n">a</span><span class="p">:</span> <span class="n">buttonPressAddLocation</span><span class="p">(</span><span class="n">coordinates</span><span class="p">,</span> <span class="n">corridors</span><span class="p">,</span> <span class="n">corridortoadd</span><span class="p">,</span> <span class="n">location</span><span class="o">.</span><span class="n">text</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="n">Button</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;AddCorridor&quot;</span><span class="p">,</span><span class="n">on_press</span><span class="o">=</span><span class="k">lambda</span> <span class="n">a</span><span class="p">:</span> <span class="n">buttonPressAddCorridor</span><span class="p">(</span><span class="n">corridortoadd</span><span class="p">)))</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="n">Button</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;Close window&quot;</span><span class="p">,</span><span class="n">on_press</span><span class="o">=</span><span class="k">lambda</span> <span class="n">a</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">popup</span><span class="o">.</span><span class="n">dismiss</span><span class="p">()))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">popup</span> <span class="o">=</span> <span class="n">Popup</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Add Corridor&quot;</span><span class="p">,</span> <span class="n">auto_dismiss</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">size_hint</span><span class="o">=</span><span class="p">(</span><span class="o">.</span><span class="mi">5</span><span class="p">,</span><span class="o">.</span><span class="mi">5</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">popup</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">popup</span><span class="o">.</span><span class="n">open</span><span class="p">()</span></div>
        
                   
        
<div class="viewcode-block" id="LineMapLayer.get_x"><a class="viewcode-back" href="../../source/DroneProject.html#DroneProject.MapViewApp.LineMapLayer.get_x">[docs]</a>    <span class="k">def</span> <span class="nf">get_x</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lon</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the x position on the map using this map source&#39;s projection</span>
<span class="sd">        (0, 0) is located at the top left.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">clamp</span><span class="p">(</span><span class="n">lon</span><span class="p">,</span> <span class="n">MIN_LONGITUDE</span><span class="p">,</span> <span class="n">MAX_LONGITUDE</span><span class="p">)</span></div>
 
<div class="viewcode-block" id="LineMapLayer.get_y"><a class="viewcode-back" href="../../source/DroneProject.html#DroneProject.MapViewApp.LineMapLayer.get_y">[docs]</a>    <span class="k">def</span> <span class="nf">get_y</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lat</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the y position on the map using this map source&#39;s projection</span>
<span class="sd">        (0, 0) is located at the top left.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">lat</span> <span class="o">=</span> <span class="n">clamp</span><span class="p">(</span><span class="o">-</span><span class="n">lat</span><span class="p">,</span> <span class="n">MIN_LATITUDE</span><span class="p">,</span> <span class="n">MAX_LATITUDE</span><span class="p">)</span>
        <span class="n">lat</span> <span class="o">=</span> <span class="n">lat</span> <span class="o">*</span> <span class="n">pi</span> <span class="o">/</span> <span class="mf">180.</span>
        <span class="k">return</span> <span class="p">((</span><span class="mf">1.0</span> <span class="o">-</span> <span class="n">log</span><span class="p">(</span><span class="n">tan</span><span class="p">(</span><span class="n">lat</span><span class="p">)</span> <span class="o">+</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="n">cos</span><span class="p">(</span><span class="n">lat</span><span class="p">))</span> <span class="o">/</span> <span class="n">pi</span><span class="p">))</span></div>
    
<div class="viewcode-block" id="LineMapLayer.draw_line"><a class="viewcode-back" href="../../source/DroneProject.html#DroneProject.MapViewApp.LineMapLayer.draw_line">[docs]</a>    <span class="k">def</span> <span class="nf">draw_line</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="n">mapview</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">zoom</span> <span class="o">=</span> <span class="n">mapview</span><span class="o">.</span><span class="n">zoom</span>
        <span class="k">global</span> <span class="n">coordinates</span>
        <span class="k">global</span> <span class="n">corridors</span>
        <span class="c1">#corridor = corr</span>
       
        <span class="c1"># When zooming we must undo the current scatter transform</span>
        <span class="c1"># or the animation distorts it</span>
        <span class="n">scatter</span> <span class="o">=</span> <span class="n">mapview</span><span class="o">.</span><span class="n">_scatter</span>
        <span class="n">map_source</span> <span class="o">=</span> <span class="n">mapview</span><span class="o">.</span><span class="n">map_source</span>
        <span class="n">sx</span><span class="p">,</span><span class="n">sy</span><span class="p">,</span><span class="n">ss</span> <span class="o">=</span> <span class="n">scatter</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">scatter</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">scatter</span><span class="o">.</span><span class="n">scale</span>
        <span class="n">vx</span><span class="p">,</span><span class="n">vy</span><span class="p">,</span><span class="n">vs</span> <span class="o">=</span> <span class="n">mapview</span><span class="o">.</span><span class="n">viewport_pos</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">mapview</span><span class="o">.</span><span class="n">viewport_pos</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">mapview</span><span class="o">.</span><span class="n">scale</span>       
        <span class="c1"># Account for map source tile size and mapview zoom</span>
        <span class="n">ms</span> <span class="o">=</span> <span class="nb">pow</span><span class="p">(</span><span class="mf">2.0</span><span class="p">,</span><span class="n">mapview</span><span class="o">.</span><span class="n">zoom</span><span class="p">)</span> <span class="o">*</span> <span class="n">map_source</span><span class="o">.</span><span class="n">dp_tile_size</span>        
        <span class="c1">#: Since lat is not a linear transform we must compute manually </span>
               
        <span class="c1">#line_points = []</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="p">:</span>
                <span class="c1"># Clear old line</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        
        <span class="k">for</span> <span class="n">corridor</span> <span class="ow">in</span> <span class="n">corridors</span><span class="p">:</span>
            <span class="n">line_points</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">lat</span><span class="p">,</span><span class="n">lon</span> <span class="ow">in</span> <span class="n">corridor</span><span class="p">:</span>
                <span class="n">line_points</span><span class="o">.</span><span class="n">extend</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">get_x</span><span class="p">(</span><span class="n">lon</span><span class="p">),</span><span class="bp">self</span><span class="o">.</span><span class="n">get_y</span><span class="p">(</span><span class="n">lat</span><span class="p">)))</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;linepointslist:&quot;</span><span class="p">)</span>
                <span class="nb">print</span> <span class="p">(</span><span class="n">line_points</span><span class="p">)</span>
                <span class="c1">#line_points.extend(mapview.get_window_xy_from(lat,lon,mapview.zoom))</span>
        
         
            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="p">:</span>
                <span class="c1"># Clear old line</span>
                <span class="c1">#self.canvas.clear()</span>
                <span class="c1"># Undo the scatter animation transform</span>
                <span class="n">Scale</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="n">ss</span><span class="p">,</span><span class="mi">1</span><span class="o">/</span><span class="n">ss</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
                <span class="n">Translate</span><span class="p">(</span><span class="o">-</span><span class="n">sx</span><span class="p">,</span><span class="o">-</span><span class="n">sy</span><span class="p">)</span>
                
                <span class="c1"># Apply the get window xy from transforms</span>
                <span class="n">Scale</span><span class="p">(</span><span class="n">vs</span><span class="p">,</span><span class="n">vs</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
                <span class="n">Translate</span><span class="p">(</span><span class="o">-</span><span class="n">vx</span><span class="p">,</span><span class="o">-</span><span class="n">vy</span><span class="p">)</span>
                   
                <span class="c1"># Apply the what we can factor out</span>
                <span class="c1"># of the mapsource long,lat to x,y conversion</span>
                <span class="n">Scale</span><span class="p">(</span><span class="n">ms</span><span class="o">/</span><span class="mf">360.0</span><span class="p">,</span><span class="n">ms</span><span class="o">/</span><span class="mf">2.0</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
                <span class="n">Translate</span><span class="p">(</span><span class="mi">180</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
                 
                <span class="c1"># Draw new</span>
                <span class="n">Color</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;linepointslist Line:&quot;</span><span class="p">)</span>
                <span class="nb">print</span> <span class="p">(</span><span class="n">line_points</span><span class="p">)</span>
                <span class="n">Line</span><span class="p">(</span><span class="n">points</span><span class="o">=</span><span class="n">line_points</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="c1">#4/ms)#, joint=&quot;round&quot;,joint_precision=100)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">ask_update</span><span class="p">()</span></div></div>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">MapViewApp</span><span class="p">()</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>

          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">Automated Drone Traffic Control System</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../modules.html">DroneProject</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  <li><a href="../index.html">Module code</a><ul>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2021, James Hall.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.8.5</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
    </div>

    

    
  </body>
</html>